<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>3.4. Die einfachst anzunehmende Webseite</title><link rel="stylesheet" href="./default.css" type="text/css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta name="package" content="" /><link rel="home" href="index.html" title="Ruby on Rails 3.0" /><link rel="up" href="erste_schritte_mit_rails.html" title="Kapitel 3. Erste Schritte mit Rails" /><link rel="prev" href="neues_rails_projekt_starten.html" title="3.3. Ein neues Railsprojekt starten" /><link rel="next" href="basics_generisches_html_framework.html" title="3.5. Generisches HTML-Framework (Layout)" /></head><body id="your-body"><div id="content"><div id="content-inner"><div id="leftcol" class="sidebar"><ul class="breadcrumbs"><li class="breadcrumb-link" style="margin-left: 0em"><a href="index.html">Ruby on Rails 3.0</a></li><li class="breadcrumb-link breadcrumb-bullet" style="margin-left: 0.8em"><a href="erste_schritte_mit_rails.html">Erste Schritte mit
  Rails</a></li><li class="breadcrumb-node breadcrumb-last breadcrumb-bullet" style="margin-left: 1.6em"><a href="die_einfachst_anzunehmende_webseite.html">Die einfachst
    anzunehmende Webseite</a></li><li class="breadcrumb-link breadcrumb-bullet-another" style="margin-left: 2.4em"><a href="die_einfachst_anzunehmende_webseite.html#html_seite_im_public_verzeichnis">Statische
      HTML-Seite im public-Verzeichnis</a></li><li class="breadcrumb-link breadcrumb-bullet-another" style="margin-left: 2.4em"><a href="die_einfachst_anzunehmende_webseite.html#einfache_erb_seite">Eine einfache
      erb-Webseite</a></li><li class="breadcrumb-link breadcrumb-bullet-another" style="margin-left: 2.4em"><a href="die_einfachst_anzunehmende_webseite.html#partials">Partials</a></li></ul><div id="textsize"><span class="textts"> Change Text Size</span><br /><a href="javascript:void(0);" onclick="javascript:body.style.fontSize='13px'"><span class="plusts" style="font-size: small;">+</span></a><a href="javascript:void(0);" onclick="javascript:body.style.fontSize='15px'"><span class="plusts" style="font-size: large;">+</span></a><a href="javascript:void(0);" onclick="javascript:body.style.fontSize='17px'"><span class="plusts" style="font-size: x-large;">+</span></a></div></div><div id="rightcol" class="sidebar"></div><div id="maincol"><ul class="docnav top"><li class="previous"><a accesskey="p" href="neues_rails_projekt_starten.html"><strong>Zurück</strong></a></li><li class="next"><a accesskey="n" href="basics_generisches_html_framework.html"><strong>Weiter</strong></a></li></ul><div class="section" title="3.4. Die einfachst anzunehmende Webseite" id="die_einfachst_anzunehmende_webseite"><div class="titlepage"><div><div><h2 class="title">3.4. Die einfachst
    anzunehmende Webseite</h2></div></div></div><div class="para">Mit Ruby on Rails werden Webseiten erstellt bzw. ausgeliefert. Also
    fangen wir als aller erstes mal mit den zwei einfachsten Varianten
    an.</div><div class="section" title="3.4.1. Statische HTML-Seite im public-Verzeichnis" id="html_seite_im_public_verzeichnis"><div class="titlepage"><div><div><h3 class="title">3.4.1. Statische
      HTML-Seite im public-Verzeichnis</h3></div></div></div><div class="para">Ich gehe davon aus, das Sie rudimentäre HTML-Kenntnisse haben -
      für viel mehr reicht mein HTML-Wissen auch nicht ;-). Erstellen wir also
      mal eine ganz einfache Hello-World HTML-Seite:<pre class="programlisting">&lt;html&gt;
&lt;title&gt;Hello World!&lt;/title&gt;
&lt;body&gt;
  &lt;h1&gt;Hello World!&lt;/h1&gt;
  &lt;p&gt;Eine Beispielseite.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class="para">Das ganze speichern wir in der Datei
      <code class="filename">public/hello-world.html</code> ab und starten den Rails
      Webserver:<pre class="screen">stefan@swmbp 0 head- movie-app$ <span class="command"><strong>rails server</strong></span>
=&gt; Booting WEBrick
=&gt; Rails 3.0.0.beta2 application starting in development on http://0.0.0.0:3000
=&gt; Call with -d to detach
=&gt; Ctrl-C to shutdown server
[2010-04-21 21:16:49] INFO  WEBrick 1.3.1
[2010-04-21 21:16:49] INFO  ruby 1.9.2 (2010-04-11) [x86_64-darwin10.3.0]
[2010-04-21 21:16:49] INFO  WEBrick::HTTPServer#start: pid=13271 port=3000
</pre></div><div class="para">Diese Webseite können wir uns mit der URI <code class="uri"><a class="uri" href="http://0.0.0.0:3000/hello-world" target="">http://0.0.0.0:3000/hello-world</a></code>
      anschauen:<div class="screenshot"><div class="mediaobject"><img src="screenshots/hello-world-html.jpg" width="500" /></div></div></div><div class="para">Wir können natürlich auch die URI <code class="uri"><a class="uri" href="http://0.0.0.0:3000/hello-world.html" target="">http://0.0.0.0:3000/hello-world.html</a></code>
      nehmen. Allerdings sieht Rails HTML und damit die Datei-Endung
      <code class="filename">html</code> quasi als Standard-Ausgabe-Format an und
      deshalb kann man sich das ".html" hier sparen.</div><div class="para">So, jetzt wissen Sie schon mal, wie man ganz statische Seiten in
      Rails integrieren kann. Das ist manchmal für Seiten praktisch, die sich
      nie, aber wirklich gar nie ändern. Natürlich gilt dies für jegliche Art
      von Datei. So sind Klassiker die Favicon-Datei und die robots.txt Datei.
      Beide legt man einfach in das <code class="filename">public/</code>
      Verzeichnis.</div></div><div class="section" title="3.4.2. Eine einfache erb-Webseite" id="einfache_erb_seite"><div class="titlepage"><div><div><h3 class="title">3.4.2. Eine einfache
      erb-Webseite</h3></div></div></div><div class="para">Kennen Sie PHP? Dann wird Ihnen eine erb-Datei sehr bekannt
      vorkommen. Es ist eine Mischung aus HTML und Ruby-Code. Allerdings
      können wir eine solche erb-Webseite nicht einfach in das
      <code class="filename">public</code> Verzeichnis legen, da dort abgelegte Seite
      1:1 ausgeliefert werden und nicht durch einen erb-Parser gehen.
      Dummerweise müssen wir dafür jetzt direkt mit dem MVC-Modell anrücken.
      Wir brauchen also einen Controler. Den können wir mit <span class="command"><strong>rails
      generate controller</strong></span> anlegen. Schauen wir uns mal die Hilfe
      dazu an:<pre class="screen">stefan@swmbp 0 head- movie-app$ <span class="command"><strong>rails generate controller</strong></span>
Usage:
  rails generate controller NAME [action action] [options]

Options:
  -e, [--template-engine=NAME]  # Template engine to be invoked
                                # Default: erb
  -t, [--test-framework=NAME]   # Test framework to be invoked
                                # Default: test_unit
      [--helper]                # Indicates when to generate helper
                                # Default: true

Runtime options:
  -f, [--force]    # Overwrite files that already exist
  -p, [--pretend]  # Run but do not make any changes
  -q, [--quiet]    # Supress status output
  -s, [--skip]     # Skip files that already exist

Description:
    Stubs out a new controller and its views. Pass the controller name, either
    CamelCased or under_scored, and a list of views as arguments.

    To create a controller within a module, specify the controller name as a
    path like 'parent_module/controller_name'.

    This generates a controller class in app/controllers and invokes helper,
    template engine and test framework generators.

Example:
    `rails generate controller CreditCard open debit credit close`

    Credit card controller with URLs like /credit_card/debit.
        Controller:      app/controllers/credit_card_controller.rb
        Functional Test: test/functional/credit_card_controller_test.rb
        Views:           app/views/credit_card/debit.html.erb [...]
        Helper:          app/helpers/credit_card_helper.rb
stefan@swmbp 0 head- movie-app$</pre></div><div class="para">A-ha! Unten ist freundlicherweise direkt ein Beispiel angegeben
      "<code class="code">rails generate controller CreditCard open debit credit
      close</code>". Passt aber nicht direkt für unseren Fall.</div><div class="para">Ich bin mutig und schlage vor, das wir einfach mal was
      ausprobieren:<pre class="screen">stefan@swmbp 0 head- movie-app$ <span class="command"><strong>rails generate controller example test</strong></span>
      create  app/controllers/example_controller.rb
       route  get "example/test"
      invoke  erb
      create    app/views/example
      create    app/views/example/test.html.erb
      invoke  test_unit
      create    test/functional/example_controller_test.rb
      invoke  helper
      create    app/helpers/example_helper.rb
      invoke    test_unit
      create      test/unit/helpers/example_helper_test.rb
stefan@swmbp 0 head- movie-app$</pre></div><div class="para">Puhhh... da wird ja direkt ne ganze Menge erstellt. Unter anderem
      eine Datei <code class="filename">app/views/example/test.html.erb</code>. Schauen
      wir uns die mal an:<pre class="programlisting">&lt;h1&gt;Example#test&lt;/h1&gt;
&lt;p&gt;Find me in app/views/example/test.html.erb&lt;/p&gt;
</pre></div><div class="para">Ist also auch HTML. Sogar noch einfacher, als unsere
      hello-world.html Seite von oben (hier fehlen ja einige Tags). Zum Testen
      starten wir den Webserver<pre class="screen">stefan@swmbp 0 head- movie-app$ <span class="command"><strong>rails server</strong></span>
=&gt; Booting WEBrick
=&gt; Rails 3.0.0.beta2 application starting in development on http://0.0.0.0:3000
=&gt; Call with -d to detach
=&gt; Ctrl-C to shutdown server
[2010-04-21 21:54:40] INFO  WEBrick 1.3.1
[2010-04-21 21:54:40] INFO  ruby 1.9.2 (2010-04-11) [x86_64-darwin10.3.0]
[2010-04-21 21:54:40] INFO  WEBrick::HTTPServer#start: pid=14416 port=3000
</pre></div><div class="para">und schauen uns die Webseite mit der URI <code class="uri"><a class="uri" href="http://0.0.0.0:3000/example/test" target="">http://0.0.0.0:3000/example/test</a></code>
      mal im Browser an:<div class="screenshot"><div class="mediaobject"><img src="screenshots/example-test-erb.jpg" width="500" /></div></div></div><div class="para">Im Log <code class="filename">log/development.log</code> finden wir den
      folgenden Eintrag:<pre class="screen">Started GET "/example/test" for 127.0.0.1 at 2010-04-21 22:03:49
  Processing by ExampleController#test as HTML
Rendered example/test.html.erb (0.2ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
</pre></div><div class="para">Das ist fast schon verständlich geschrieben. Es kam also vom
      localhost (127.0.0.1) ein HTTP GET-Request für die URI "/example/test"
      rein. Die wurde dann anscheinend vom Controller
      <code class="code">ExampleController</code> mit der Methode
      <code class="methodname">test</code> als HTML gerendert. Das ganze hat ungefähr
      3ms gedauert.</div><div class="para">Jetzt müssen wir nur noch diesen Controller finden. Aber Sie haben
      Glück ... ich weiß es nämlich. ;-) Die Controller finden sich im
      Verzeichnis <code class="filename">app/controllers</code> und siehe da, dort ist
      auch tatsächlich die entsprechende Datei
      <code class="filename">app/controllers/example_controller.rb</code>. Schauen wir
      mal rein:<pre class="programlisting">class ExampleController &lt; ApplicationController
  def test
  end

end
</pre></div><div class="para">Das ist jetzt sehr übersichtlich. Der Controller
      <code class="code">ExampleController</code> stammt vom
      <code class="code">ApplicationController</code> ab und besteht aktuell aus genau
      einer Methode mit dem Namen <code class="methodname">test</code>. Und diese
      Methode macht nichts.</div><div class="para">Sie werden sich fragen, woher Rails weiß, das bei der URI
      <code class="uri">/example/test</code> der Controller <code class="code">example</code> und die
      Methode <code class="code">test</code> abzuarbeiten ist. Das wird nämlich nicht durch
      eine magische Logik, sondern durch eine einfache Routing-Konfiguration
      gesteuert. Diese finden Sie in der Datei
      <code class="filename">config/routes.rb</code> in der zweiten
      Zeile:<pre class="programlisting">  get "example/test"
</pre></div><div class="para">Diese Zeile wurde vom <span class="command"><strong>rails generate controller</strong></span>
      automatisch eingefügt. In der Routing-Datei können Sie auch beliebiges
      Mapping vornehmen. Aber dazu später mehr. Aktuell sehen unsere Routen
      sehr einfach aus. Mit dem Befehl <span class="command"><strong>rake routes</strong></span> können
      wir diese abfragen:<pre class="screen">stefan@swmbp 0 head- movie-app$ <span class="command"><strong>rake routes</strong></span>
(in /Users/stefan/Development/test/movie-app)
example_test GET /example/test {:controller=&gt;"example", :action=&gt;"test"}
stefan@swmbp 0 head- movie-app$</pre></div><div class="para">Wir kümmern uns später noch genauer um die Routen. Ich wollte es
      an dieser Stelle nur nicht gänzlich überspringen.</div><div class="para">MVC steht ja für Model-View-Controller (siehe auch <code class="uri"><a class="uri" href="http://de.wikipedia.org/wiki/Model_View_Controller" target="">http://de.wikipedia.org/wiki/Model_View_Controller</a></code>).
      Wo ist jetzt das Model? Antwort: Wir haben kein Model in diesem Fall.
      Wir haben einen Controller mit dem Namen <code class="code">ExampleController</code>
      und einen View mit dem Namen <code class="code">test</code>. Das ist in diesem
      einfachsten Fall alles. Mit weniger geht es allerdings auch
      nicht.</div><div class="section" title="3.4.2.1. erb mit Programmierlogik" id="erb_mit_programmierlogik"><div class="titlepage"><div><div><h4 class="title">3.4.2.1. erb mit Programmierlogik</h4></div></div></div><div class="para">Rein statische HTML-Seiten sind ja nicht der Grund, um sich mit
        Rails zu beschäftigen. Wie können wir also Ruby-Code in der erb-Datei
        <code class="filename">app/views/example/test.html.erb</code> verwenden? Ich
        zeige es mal an einem Beispiel und verändere die
        <code class="filename">app/views/example/test.html.erb</code> wie
        folgt:<pre class="programlisting">&lt;h1&gt;Example#test&lt;/h1&gt;
&lt;p&gt;Find me in app/views/example/test.html.erb&lt;/p&gt;

&lt;p&gt;
Die aktuelle Uhrzeit ist 
&lt;%= Time.now %&gt;
&lt;/p&gt;
</pre></div><div class="para">Die daraus resultierende Webseite sieht so aus:<div class="screenshot"><div class="mediaobject"><img src="screenshots/time_now_example.jpg" width="500" /></div></div></div><div class="para">Im Log erscheint:<pre class="screen">Started GET "/example/test" for 127.0.0.1 at 2010-04-21 23:03:47
  Processing by ExampleController#test as HTML
Rendered example/test.html.erb (0.6ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
</pre></div><div class="para">Daraus können wir jetzt folgende Informationen
        ableiten:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><div class="para">Der Autor (ich) hat um 23:03 noch an dem Buch geschrieben.
              Selber schuld! ;-)</div></li><li class="listitem"><div class="para">Das erstellen der Webseite hat 5ms und damit etwas länger
              als bei der reinen HTML-Variante gedauert.</div></li><li class="listitem"><div class="para">Innerhalb einer erb-Datei wird Ruby-Code anscheinend mit
              <code class="code">&lt;%=</code> und <code class="code">%&gt;</code> eingeklammert.</div></li><li class="listitem"><div class="para">Rails hat automatisch aus <code class="code">Time.now</code> ein
              <code class="code">Time.now.to_s</code> gemacht. Denn <code class="code">Time.now</code>
              gehört zur Klasse Time und kann so gar nicht angezeigt werden.
              Auf einer Webseite kann nur Text also ein String angezeigt
              werden. Wir merken uns: Immer wenn Rails mit der Klasse eines
              Ergebnisses nichts anfangen kann, dann fügt es automatisch die
              Methode <code class="methodname">to_s</code> an. Deshalb sollte man bei
              selbst erstellten Klassen diese Methode immer mit
              anbieten.</div></li></ul></div></div><div class="para">Das mit dem Ruby-Code schauen wir uns mal genauer an. In einer
        <code class="filename">html.erb</code> Datei gibt zusätzlich zu den
        HTML-Elementen zwei Arten von Ruby-Code Elementen:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><div class="para"><code class="code">&lt;% ... %&gt;</code></div><div class="para">Führt den enthaltenen Ruby-Code aus, aber gibt nichts
              aus.</div></li><li class="listitem"><div class="para"><code class="code">&lt;%= ... %&gt;</code></div><div class="para">Führt den enthaltenen Ruby-Code aus und gibt das Ergebnis
              als Text aus. Dabei werden seit Ruby 3.0 automatisch
              problematische Zeichen escaped (das musste man früher mit
              <code class="code">h</code> manuel machen). Falls Sie einmal nicht escapeten
              Text ausgeben möchten, so müssen Sie das mit
              <code class="code">raw(string)</code> realisieren.</div></li></ul></div></div><div class="para">Ich erkläre das am besten mal mit einem Beispiel. Bitte
        verändern Sie die <code class="filename">app/views/example/test.html.erb</code>
        Datei wie folgt:<pre class="programlisting">&lt;h1&gt;Example#test&lt;/h1&gt;
&lt;p&gt;Find me in app/views/example/test.html.erb&lt;/p&gt;

&lt;p&gt;
Die aktuelle Uhrzeit ist 
&lt;%= Time.now %&gt;
&lt;/p&gt;

&lt;ul&gt;
&lt;% (1..5).each do |i| %&gt;
&lt;li&gt;&lt;%= i %&gt;&lt;/li&gt;
&lt;% end %&gt;
&lt;/ul&gt;
</pre></div><div class="para">Danach schauen wir uns das Ergebnis im Browser an:<div class="screenshot"><div class="mediaobject"><img src="screenshots/test_erb_html_example_2.jpg" width="500" /></div></div></div><div class="para">Schauen wir uns den generierten HTML-Code an:<pre class="programlisting">&lt;h1&gt;Example#test&lt;/h1&gt; 
&lt;p&gt;Find me in app/views/example/test.html.erb&lt;/p&gt; 
 
&lt;p&gt; 
Die aktuelle Uhrzeit ist 
2010-04-22 14:08:47 +0200
&lt;/p&gt; 
 
&lt;ul&gt; 
&lt;li&gt;1&lt;/li&gt; 
&lt;li&gt;2&lt;/li&gt; 
&lt;li&gt;3&lt;/li&gt; 
&lt;li&gt;4&lt;/li&gt; 
&lt;li&gt;5&lt;/li&gt; 
&lt;/ul&gt; </pre></div><div class="para">Folgende Sachen fallen auf:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><div class="para">Zwischen dem ersten und zweiten Screenshot ist einiges an
              Zeit vergangen. ;-)</div></li><li class="listitem"><div class="para">Der HTML-Code ist so nicht valide. Es fehlen noch ein paar
              "Kleinigkeiten" wie ein <code class="code">&lt;HTML&gt;</code> oder ein
              <code class="code">&lt;BODY&gt;</code> Tag.</div></li><li class="listitem"><div class="para">Bei der Ausgabe der Variable <code class="varname">i</code> fügt
              Rails wieder automatisch die <code class="methodname">.to_s</code>
              Methode hinzu. Denn <code class="varname">i</code> gehört zur Klasse
              Integer.</div></li></ul></div></div><div class="para">Ich glaube das Grundprinzip von erb ist jetzt klar. Der Rest
        kommt mit der Übung. Einen Punkt möchte ich aber noch kurz anreissen:
        Das Zusammenspiel vom Controller und vom View. Die erb-Datei ist im
        View und soll damit so wenig wie möglich Eigenintelligenz besitzen. In
        der idealen Welt kann eine erb-Datei jeder HTML-Designer ohne
        Programmierkenntnisse verändern und alle Programmierer arbeiten nur im
        Controller oder im Model (wozu wir später kommen). Leider gibt es
        dabei immer eine grosse Grauzone, aber ich werde im Buch versuchen die
        Vorteile einer sauberen Abtrennung aufzuzeigen.</div><div class="para">Wir brechen jetzt einfach mal ein Beispiel vom Zaun und fügen im
        Controller eine Instance-Variable für die aktuelle Uhrzeit ein und
        fügen diese dann im View ein. Wir nehmen also Programmierintelligenz
        aus dem View in den Controller.</div><div class="para">Die Controller Datei
        <code class="filename">app/controllers/example_controller.rb</code> sieht dann
        so aus:<pre class="programlisting">class ExampleController &lt; ApplicationController
  def test
    <span class="emphasis"><em>@current_time</em></span> = Time.now
  end

end
</pre></div><div class="para">In der View Datei
        <code class="filename">app/views/example/test.html.erb</code> können wir dann
        auf diese Instance-Variable zurückgreifen:<pre class="programlisting">&lt;h1&gt;Example#test&lt;/h1&gt;
&lt;p&gt;Find me in app/views/example/test.html.erb&lt;/p&gt;

&lt;p&gt;
Die aktuelle Uhrzeit ist 
&lt;%= <span class="emphasis"><em>@current_time</em></span> %&gt;
&lt;/p&gt;

&lt;ul&gt;
&lt;% (1..5).each do |i| %&gt;
&lt;li&gt;&lt;%= i %&gt;&lt;/li&gt;
&lt;% end %&gt;
&lt;/ul&gt;
</pre></div><div class="para">Die angezeigte HTML-Seite verändert sich nicht. OK, die Uhrzeit
        ist natürlich immer die aktuelle. Aber wir haben eine Trennung von
        Programmierlogik und Darstellungslogik mit dem Controller und dem
        View.</div><div class="para">Mir ist klar, das jetzt keiner aufspringen und schreien wird
        "Danke für die Erleuchtung! Ich werde nur noch sauber nach MVC
        programmieren". Das obige Beispiel ist der erste kleine Schritt in die
        Richtung und zeigt wie wir einfach mit Instance Variablen (das sind
        die mit dem @-Zeichen davor) Werte aus dem Controller in den View
        bringenen können.</div></div></div><div class="section" title="3.4.3. Partials" id="partials"><div class="titlepage"><div><div><h3 class="title">3.4.3. Partials</h3></div></div></div><div class="para">Mit Partials lassen sich innerhalb von erb-Seiten andere Views die
      mit einem Unterstrich (Underscore = _) anfangen einbetten. Nehmen wir
      einmal an, das wir aus logischen (hier rein hypotetisch) Gründen den
      folgenden Teil aus unserer
      <code class="filename">app/views/movies/test.html.erb</code> auslagern
      wollen:<pre class="programlisting">&lt;ul&gt;
&lt;% (1..5).each do |i| %&gt;
&lt;li&gt;&lt;%= i %&gt;&lt;/li&gt;
&lt;% end %&gt;
&lt;/ul&gt;
</pre></div><div class="para">Dann können wir eine Datei
      <code class="filename">app/views/movies/_simple_example.html.erb</code> mit genau
      diesem Inhalt erstellen und die
      <code class="filename">app/views/example/test.html.erb</code> wie folgt
      verändern:<pre class="programlisting">&lt;h1&gt;Example#test&lt;/h1&gt;
&lt;p&gt;Find me in app/views/example/test.html.erb&lt;/p&gt;

&lt;p&gt;
Die aktuelle Uhrzeit ist 
&lt;%= @current_time %&gt;
&lt;/p&gt;

<span class="emphasis"><em>&lt;%= render :partial =&gt; "simple_example" %&gt;</em></span></pre></div><div class="para">Die gerenderte Webseite <code class="uri"><a class="uri" href="http://0.0.0.0:3000/example/test" target="">http://0.0.0.0:3000/example/test</a></code>
      sieht genauso aus wie vorher, aber wir haben die Teile logisch von
      einander getrennt. Partials bieten damit die Möglichkeit gleiche Inhalte
      in verschiedenen Views zu benutzen und nur einmal zu erstellen. Da DRY
      (Don't Repeat Yourself) in der Rails Community sehr ausgeprägt gelebt
      wird, ist dies eine gute Methode, um DRY innerhalb von Views zu
      realisieren. <div class="important"><h2>Wichtig</h2><div class="para">Der Name eines Partials wird immer ohne den Unterstrich am
          Anfang und ohne die erb und HTML Endung angegeben. Aber die
          wirkliche Datei muss im Dateinamen mit einem Unterstrich anfangen
          und auch am Ende mir der erb und HTML Endung aufhören.</div></div></div><div class="para">Partials können auch aus anderen Bereichen des Unterverzeichnisses
      <code class="filename">app/views</code> eingebunden werden. So können Sie für
      wiederkehrende und übergreifende Inhalte beispielsweise ein Verzeichnis
      <code class="filename">app/views/shared</code> anlegen und dort eine Datei
      <code class="filename">_one_more_example.html.erb</code> anlegen. Das Einbetten
      im erb Code würde dann mit folgender Zeile erfolgen:<pre class="programlisting">&lt;%= render :partial =&gt; "shared/one_more_example" %&gt;</pre></div><div class="section" title="3.4.3.1. Lokale Variablen an ein Partial übergeben" id="partials_locale_variables"><div class="titlepage"><div><div><h4 class="title">3.4.3.1. Lokale Variablen an
        ein Partial übergeben</h4></div></div></div><div class="para">Partials sind im DRY Gedanken sehr gut. Aber was sie erst
        richtig praktisch macht, ist die Möglichkeit lokale Variablen zu
        übergeben. Diese können dann im Partial selbst benutzt werden.
        Beispielhaft zerpflücke ich unsere arme Beispielseite noch mehr und
        erstelle eine
        <code class="filename">app/views/movies/_current_time.html.erb</code> mit
        folgendem Inhalt:<pre class="programlisting">&lt;p&gt;
Die aktuelle Uhrzeit ist 
&lt;%= current_time %&gt;
&lt;/p&gt;</pre></div><div class="para">Danach binde ich das Partial in der
        <code class="filename">app/views/example/test.html.erb</code> wie folgt
        ein:<pre class="programlisting">&lt;h1&gt;Example#test&lt;/h1&gt;
&lt;p&gt;Find me in app/views/example/test.html.erb&lt;/p&gt;

<span class="emphasis"><em>&lt;%= render :partial =&gt; "current_time", :locals =&gt; { :current_time =&gt; @current_time } %&gt;</em></span>

&lt;%= render :partial =&gt; "simple_example" %&gt;</pre></div><div class="para">Wichtig dabei ist der Unterschied zwischen der Instance-Variable
        <code class="varname">@current_time</code> und der lokalen Variable
        <code class="varname">current_time</code>. Da hat man sich schnell mal
        verhaspelt.</div></div><div class="section" title="3.4.3.2. Weitere Dokumentation zum Thema Partials" id="weitere_doku_zu_partials"><div class="titlepage"><div><div><h4 class="title">3.4.3.2. Weitere Dokumentation
        zum Thema Partials</h4></div></div></div><div class="para">Unter <code class="uri"><a class="uri" href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" target="">http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials</a></code>
        finden Sie die Ruby on Rails Doku zum Thema Partials.</div></div></div></div><ul class="docnav bottom"><li class="previous"><a accesskey="p" href="neues_rails_projekt_starten.html"><strong>Zurück</strong>3.3. Ein neues Railsprojekt starten</a></li><li class="up"><a accesskey="u" href="#"><strong>Nach oben</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Zum Anfang</strong></a></li><li class="next"><a accesskey="n" href="basics_generisches_html_framework.html"><strong>Weiter</strong>3.5. Generisches
    HTML-Framework (Layout)</a></li></ul></div><div class="clear"></div></div></div></body></html>
