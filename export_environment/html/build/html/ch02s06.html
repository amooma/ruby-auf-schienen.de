<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>2.6. Variablen</title><link rel="stylesheet" href="./default.css" type="text/css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta name="package" content="" /><link rel="home" href="index.html" title="Ruby on Rails 3.0" /><link rel="up" href="ruby-grundlagen.html" title="Kapitel 2. Ruby Grundlagen" /><link rel="prev" href="ruby-ist-objekt-orientiert.html" title="2.5. Ruby ist objektorientiert" /><link rel="next" href="noch_mal_methoden.html" title="2.7. Noch mal Methoden" /></head><body id="your-body"><div id="content"><div id="content-inner"><div id="leftcol" class="sidebar"><ul class="breadcrumbs"><li class="breadcrumb-link" style="margin-left: 0em"><a href="index.html">Ruby on Rails 3.0</a></li><li class="breadcrumb-link breadcrumb-bullet" style="margin-left: 0.8em"><a href="ruby-grundlagen.html">Ruby Grundlagen</a></li><li class="breadcrumb-node breadcrumb-last breadcrumb-bullet" style="margin-left: 1.6em"><a href="ch02s06.html">Variablen</a></li><li class="breadcrumb-link breadcrumb-bullet-another" style="margin-left: 2.4em"><a href="ch02s06.html#id3304884">Namenskonventionen</a></li><li class="breadcrumb-link breadcrumb-bullet-another" style="margin-left: 2.4em"><a href="ch02s06.html#id3304916">String</a></li><li class="breadcrumb-link breadcrumb-bullet-another" style="margin-left: 2.4em"><a href="ch02s06.html#id3305040">Zahlen</a></li><li class="breadcrumb-link breadcrumb-bullet-another" style="margin-left: 2.4em"><a href="ch02s06.html#id3305239">Booleans und nil</a></li><li class="breadcrumb-link breadcrumb-bullet-another" style="margin-left: 2.4em"><a href="ch02s06.html#id3305280">Gültigkeitsbereich (Scope) von Variablen</a></li><li class="breadcrumb-link breadcrumb-bullet-another" style="margin-left: 2.4em"><a href="ch02s06.html#ruby-symbol">Symbol</a></li></ul><div id="textsize"><span class="textts"> Change Text Size</span><br /><a href="javascript:void(0);" onclick="javascript:body.style.fontSize='13px'"><span class="plusts" style="font-size: small;">+</span></a><a href="javascript:void(0);" onclick="javascript:body.style.fontSize='15px'"><span class="plusts" style="font-size: large;">+</span></a><a href="javascript:void(0);" onclick="javascript:body.style.fontSize='17px'"><span class="plusts" style="font-size: x-large;">+</span></a></div></div><div id="rightcol" class="sidebar"></div><div id="maincol"><ul class="docnav top"><li class="previous"><a accesskey="p" href="ruby-ist-objekt-orientiert.html"><strong>Zurück</strong></a></li><li class="next"><a accesskey="n" href="noch_mal_methoden.html"><strong>Weiter</strong></a></li></ul><div class="section" title="2.6. Variablen"><div class="titlepage"><div><div><h2 class="title">2.6. Variablen</h2></div></div></div><div class="para">Wir wissen ja jetzt, dass in Ruby alles ein Objekt ist. Also muss
    auch eine Variable ein Objekt sein.</div><div class="section" title="2.6.1. Namenskonventionen"><div class="titlepage"><div><div><h3 class="title">2.6.1. Namenskonventionen</h3></div></div></div><div class="para">Normale Variablen werden kleingeschrieben. Konstanten fangen mit
      einem Großbuchstaben an.<div class="important"><h2>Wichtig</h2><div class="para">Eine Konstante kann in Ruby auch mit einem neuen Wert
          überschrieben werden (allerdings wird dabei eine Warnung
          ausgegeben). Man sollte sich also nicht auf Unveränderlichkeit einer
          Konstanten verlassen.</div></div></div><div class="para">Auf der sicheren Seite ist man, wenn man nur ASCII-Zeichen
      verwendet. Allerdings könnten Sie mit Ruby 1.9 und der richtigen
      Kodierung auch problemlos Sonderzeichen und Umlaute in einem
      Variablennamen verwenden. Die Höflichkeit gegenüber anderen (evtl.
      ausländischen) Programmierern, die diese Zeichen vielleicht nicht fix
      und fertig auf der Tastatur haben, ist aber Grund nur reines ASCII zu
      benutzen.</div></div><div class="section" title="2.6.2. String"><div class="titlepage"><div><div><h3 class="title">2.6.2. String</h3></div></div></div><div class="para">Probieren wir mal ein wenig im irb aus. Die Methode
      <code class="methodname">.class</code> gibt uns dabei an, um welche Klasse es
      sich handelt.<pre class="screen">sw@debian:~/sandbox$ <span class="command"><strong>irb</strong></span>
irb(main):001:0&gt; <span class="command"><strong>a = 'Ein Test.'</strong></span>
=&gt; "Ein Test."
irb(main):002:0&gt; <span class="command"><strong>a.class</strong></span>
=&gt; String
</pre></div><div class="para">Das war einfach. Ruby erschafft also automagisch ein Objekt der
      Klasse String. Das ginge auch mit der Methode
      <code class="methodname">new</code>:<pre class="screen">irb(main):003:0&gt; <span class="command"><strong>b = String.new('Noch ein Test.')</strong></span>
=&gt; "Noch ein Test."
irb(main):004:0&gt; <span class="command"><strong>b.class</strong></span>
=&gt; String
</pre></div><div class="para">Wenn wir <code class="code">String.new</code> ohne einen Parameter aufrufen,
      dann wird ebenfalls ein Objekt der Klasse <code class="classname">String</code>
      erstellt. Nur ist das dann ein leerer String:<pre class="screen">irb(main):005:0&gt; <span class="command"><strong>c = String.new</strong></span>
=&gt; ""
irb(main):006:0&gt; <span class="command"><strong>c.class</strong></span>
=&gt; String
irb(main):007:0&gt; <span class="command"><strong>exit</strong></span>
</pre></div><div class="section" title="2.6.2.1. Einfache und doppelte Anführungszeichen"><div class="titlepage"><div><div><h4 class="title">2.6.2.1. Einfache und doppelte Anführungszeichen</h4></div></div></div><div class="para">Strings können nicht nur in einfachen Anführungszeichen, sondern
        auch in doppelten Anführungzeichen definiert werden. Bei den doppelten
        Anführungszeichen gibt es dann aber eine Besonderheit: Man kann
        Ausdrücke (Expressions) innerhalb eines Konstruktes <code class="code">#{}</code>
        einbinden. Das Ergebnis wird dann automatisch an die entsprechende
        Stelle im String eingesetzt.</div><div class="para">Beispiel:<pre class="screen">sw@debian:~/sandbox$ <span class="command"><strong>irb</strong></span>
irb(main):001:0&gt; <span class="command"><strong>a = 'blau'</strong></span>
=&gt; blau
irb(main):002:0&gt; <span class="command"><strong>b = "Farbe: #{a}"</strong></span>
=&gt; "Farbe: blau"
irb(main):003:0&gt; <span class="command"><strong>b.class</strong></span>
=&gt; String
irb(main):004:0&gt; <span class="command"><strong>exit</strong></span>
</pre></div><div class="para">Ist das Ergebnis des Ausdrucks kein String, versucht Ruby die
        Methode <code class="methodname">to_s</code> anzuwenden, um den Wert des
        Objekts in einen String umzuwandeln.</div></div></div><div class="section" title="2.6.3. Zahlen"><div class="titlepage"><div><div><h3 class="title">2.6.3. Zahlen</h3></div></div></div><div class="section" title="2.6.3.1. Fixnum und Bignum"><div class="titlepage"><div><div><h4 class="title">2.6.3.1. Fixnum und Bignum</h4></div></div></div><div class="para"><code class="classname">Fixnum</code> und <code class="classname">Bignum</code>
        sind <code class="classname">Integer</code>-Klassen (sprich Ganzzahlen). Ein
        <code class="classname">Fixnum</code> ist ein <code class="classname">Integer</code>,
        der in einem <span class="quote">„<span class="quote">Word</span>“</span> gespeichert werden kann.<sup>[<a id="id3305073" href="#ftn.id3305073" class="footnote">6</a>]</sup> Wird ein <code class="classname">Fixnum</code> größer, wandelt
        es sich automatisch in ein <code class="classname">Bignum</code> um.<pre class="screen">sw@debian:~/sandbox$ <span class="command"><strong>irb</strong></span>
irb(main):001:0&gt; <span class="command"><strong>20.class</strong></span>
=&gt; Fixnum
irb(main):002:0&gt; <span class="command"><strong>a = 20</strong></span>
=&gt; 20
irb(main):003:0&gt; <span class="command"><strong>a.class</strong></span>
=&gt; Fixnum
irb(main):004:0&gt; <span class="command"><strong>a = a * 555555555</strong></span>  # Ergebnis wird automatisch ein Bignum.
=&gt; 11111111100
irb(main):005:0&gt; <span class="command"><strong>a.class</strong></span>
=&gt; Bignum
irb(main):006:0&gt; <span class="command"><strong>exit</strong></span>
</pre></div></div><div class="section" title="2.6.3.2. Float"><div class="titlepage"><div><div><h4 class="title">2.6.3.2. Float</h4></div></div></div><div class="para"><code class="classname">Float</code> ist eine Klasse für reelle Zahlen
        (<span class="quote">„<span class="quote">Fließkomma-Zahlen</span>“</span>). Dabei wird die englische
        Schreibweise für das Komma (also ein Punkt) benutzt.<pre class="screen">sw@debian:~/sandbox$ <span class="command"><strong>irb</strong></span>
irb(main):001:0&gt; <span class="command"><strong>a = 20.424</strong></span>
=&gt; 20.424
irb(main):002:0&gt; <span class="command"><strong>a.class</strong></span>
=&gt; Float
irb(main):003:0&gt; <span class="command"><strong>42.2.class</strong></span>
=&gt; Float
irb(main):004:0&gt; <span class="command"><strong>exit</strong></span>
</pre></div></div><div class="section" title="2.6.3.3. Einfache Berechnungen"><div class="titlepage"><div><div><h4 class="title">2.6.3.3. Einfache Berechnungen</h4></div></div></div><div class="para">Rechnen mit Integers und Floats ist so einfach, dass man alles
        anhand von ein paar Zeilen irb-Code beschreiben kann:<pre class="screen">sw@debian:~/sandbox$ <span class="command"><strong>irb</strong></span>
irb(main):001:0&gt; <span class="command"><strong>a = 10</strong></span>
=&gt; 10
irb(main):002:0&gt; <span class="command"><strong>b = 23</strong></span>
=&gt; 23
irb(main):003:0&gt; <span class="command"><strong>a + b</strong></span>          # Addition von zwei Fixnums
=&gt; 33
irb(main):004:0&gt; <span class="command"><strong>(a + b).class</strong></span>  # Das Ergebnis ist ein Fixnum.
=&gt; Fixnum
irb(main):005:0&gt; <span class="command"><strong>c = a + b</strong></span>
=&gt; 33
irb(main):006:0&gt; <span class="command"><strong>c.class</strong></span>
=&gt; Fixnum
irb(main):007:0&gt; <span class="command"><strong>d = 3.14</strong></span>
=&gt; 3.14
irb(main):008:0&gt; <span class="command"><strong>e = a + d</strong></span>      # Addition Fixnum und Float
=&gt; 13.14
irb(main):009:0&gt; <span class="command"><strong>e.class</strong></span>        # Das Ergebnis ist ein Float.
=&gt; Float
irb(main):010:0&gt; <span class="command"><strong>a * b</strong></span>
=&gt; 230
irb(main):011:0&gt; <span class="command"><strong>(a * b).class</strong></span>
=&gt; Fixnum
irb(main):012:0&gt; <span class="command"><strong>(a * b * d).class</strong></span>
=&gt; Float
irb(main):013:0&gt; <span class="command"><strong>b - a</strong></span>
=&gt; 13
irb(main):014:0&gt; <span class="command"><strong>a += 1</strong></span>         # a = a + 1
=&gt; 11
irb(main):015:0&gt; <span class="command"><strong>exit</strong></span>
</pre></div></div></div><div class="section" title="2.6.4. Booleans und nil"><div class="titlepage"><div><div><h3 class="title">2.6.4. Booleans und nil</h3></div></div></div><div class="para">Für boolsche Werte (<code class="code">true</code> und <code class="code">false</code>) und
      für <code class="code">nil</code> (kein Wert) gibt es jeweils eine eigene
      Klasse:<pre class="screen">sw@debian:~/sandbox$ <span class="command"><strong>irb</strong></span>
irb(main):001:0&gt; <span class="command"><strong>true.class</strong></span>
=&gt; TrueClass
irb(main):002:0&gt; <span class="command"><strong>false.class</strong></span>
=&gt; FalseClass
irb(main):003:0&gt; <span class="command"><strong>nil.class</strong></span>
=&gt; NilClass
irb(main):004:0&gt; <span class="command"><strong>exit</strong></span>
</pre></div></div><div class="section" title="2.6.5. Gültigkeitsbereich (Scope) von Variablen"><div class="titlepage"><div><div><h3 class="title">2.6.5. Gültigkeitsbereich (Scope) von Variablen</h3></div></div></div><div class="para">Variablen haben je nach Art eine unterschiedliche
      <span class="quote">„<span class="quote">Reichweite</span>“</span> innerhalb der Ruby- und damit auch innerhalb
      einer Ruby-on-Rails-Applikation. Man muss bei der Programmierung diese
      Reichweite immer im Hinterkopf behalten, weil man sonst merkwürdige
      "Effekte bemerkt".</div><div class="section" title="2.6.5.1. Lokale Variablen (aaa oder _aaa)"><div class="titlepage"><div><div><h4 class="title">2.6.5.1. Lokale Variablen (aaa oder _aaa)</h4></div></div></div><div class="para">Lokale Variablen fangen entweder mit einem kleinen Buchstaben
        oder mit einem Unterstrich (<code class="literal">_</code>) an. Ihr
        Gültigkeitsbereich beschränkt sich auf die aktuelle Umgebung (z. B.
        auf die aktuelle Methode). Beispiel:<pre class="screen">sw@debian:~/sandbox$ <span class="command"><strong>irb</strong></span>
irb(main):001:0&gt; <span class="command"><strong>aaa = 10</strong></span>    # Lokale Variable aaa
=&gt; 10
irb(main):002:0&gt; <span class="command"><strong>_bbb = 20</strong></span>   # Lokale Variable _bbb
=&gt; 20
irb(main):003:0&gt; <span class="command"><strong>puts aaa</strong></span>
10
=&gt; nil
irb(main):004:0&gt; <span class="command"><strong>puts _bbb</strong></span>
20
=&gt; nil
irb(main):005:0&gt; <span class="command"><strong>def test</strong></span>       # Definition der Methode test
irb(main):006:1&gt; <span class="command"><strong>  aaa = 1000</strong></span>   # Lokale Variable aaa
irb(main):007:1&gt; <span class="command"><strong>  _bbb = 2000</strong></span>  # Lokale Variable _bbb
irb(main):008:1&gt; <span class="command"><strong>  puts aaa</strong></span>     # Ausgabe von aaa
irb(main):009:1&gt; <span class="command"><strong>  puts _bbb</strong></span>    # Ausgabe von _bbb
irb(main):010:1&gt; <span class="command"><strong>end</strong></span>            # Ende der Methode test
=&gt; nil
irb(main):011:0&gt; <span class="command"><strong>puts aaa</strong></span>
10
=&gt; nil
irb(main):012:0&gt; <span class="command"><strong>puts _bbb</strong></span>
20
=&gt; nil
irb(main):013:0&gt; <span class="command"><strong>test</strong></span>        # Aufruf der Methode test
1000                         # siehe irb-Zeile 8
2000                         # siehe irb-Ziele 9
=&gt; nil
irb(main):014:0&gt; <span class="command"><strong>puts aaa</strong></span>
10
=&gt; nil
irb(main):015:0&gt; <span class="command"><strong>puts _bbb</strong></span>
20
=&gt; nil
irb(main):016:0&gt; <span class="command"><strong>exit</strong></span>
</pre></div></div><div class="section" title="2.6.5.2. Globale Variablen ($aaa)"><div class="titlepage"><div><div><h4 class="title">2.6.5.2. Globale Variablen ($aaa)</h4></div></div></div><div class="para">Eine globale Variable fäng mit einem
        <code class="literal">$</code>-Zeichen an und ist im gesamten Programm
        erreichbar. Beispiel:<pre class="screen">sw@debian:~/sandbox$ <span class="command"><strong>irb</strong></span>
irb(main):001:0&gt; <span class="command"><strong>$aaa = 10</strong></span>
=&gt; 10
irb(main):002:0&gt; <span class="command"><strong>puts $aaa</strong></span>
10
=&gt; nil
irb(main):003:0&gt; <span class="command"><strong>def test</strong></span>    # Definition der Methode test
irb(main):004:1&gt; <span class="command"><strong>  $aaa = 20</strong></span>
irb(main):005:1&gt; <span class="command"><strong>end</strong></span>
=&gt; nil
irb(main):006:0&gt; <span class="command"><strong>puts $aaa</strong></span>   # Ausgabe von $aaa
10
=&gt; nil
irb(main):007:0&gt; <span class="command"><strong>test</strong></span>        # Aufruf der Methode test
=&gt; 20
irb(main):008:0&gt; <span class="command"><strong>puts $aaa</strong></span>   # Ausgabe von $aaa
20
=&gt; nil
irb(main):009:0&gt; <span class="command"><strong>$aaa.class</strong></span>
=&gt; Fixnum
irb(main):010:0&gt; <span class="command"><strong>exit</strong></span>
</pre></div><div class="para">Globale Variablen werden recht selten benutzt.</div></div><div class="section" title="2.6.5.3. Instanz-Variablen (@aaa)"><div class="titlepage"><div><div><h4 class="title">2.6.5.3. Instanz-Variablen (@aaa)</h4></div></div></div><div class="para">Instanz-Variablen (<span class="quote">„<span class="quote"><span class="bold bold"><strong>A</strong></span>ttribute</span>“</span>, daher das
        <code class="literal">@</code>) gelten nur innerhalb einer Klasse, dort aber
        überall. Also quasi eine Mini-Version von globalen Variablen. Im
        Gegensatz zu globalen Variablen findet man Instanz-Variablen in einer
        Rails-Applikation an jeder Ecke. Wir gehen die Sache über ein
        Beispielprogramm mit dem Namen <code class="filename">farbe.rb</code>
        an:<pre class="programlisting">class Wand
  def initialize
    <span class="bold bold"><strong>@farbe</strong></span> = 'weiß'
  end
  
  def farbe
    <span class="bold bold"><strong>@farbe</strong></span>
  end
  
  def streich_alles_rot
    <span class="bold bold"><strong>@farbe</strong></span> = 'rot'
  end
  
  def streich_alles_gelb
    <span class="bold bold"><strong>@farbe</strong></span> = 'gelb'
  end
  
  def streich_alles_rosa
    farbe = 'rosa'         # Achtung: Dies ist eine lokale Variable.
  end
end

meine_wand = Wand.new
puts meine_wand.farbe

meine_wand.streich_alles_rot
puts meine_wand.farbe

meine_wand.streich_alles_rosa
puts meine_wand.farbe
</pre>Wenn wir dieses Programm starten erscheint folgende
        Ausgabe:<pre class="screen">sw@debian:~/sandbox$ <span class="command"><strong>ruby farbe.rb</strong></span>
weiß
rot
rot
sw@debian:~/sandbox$ </pre></div><div class="para">In der Methode <code class="methodname">initialize</code> setzen wir
        die Instanz-Variable <code class="varname">@farbe</code> auf den Wert
        <span class="quote">„<span class="quote">weiß</span>“</span>. Die Methoden
        <code class="methodname">streich_alles_rot</code> und
        <code class="methodname">streich_alles_gelb</code> verändern diese
        Instanz-Variable. Die Methode
        <code class="methodname">streich_alles_rosa</code> hingegen setzt nur eine
        lokale Variable mit dem Namen <code class="varname">farbe</code> (es fehlt das
        <code class="literal">@</code>-Zeichen).</div><div class="para">Mit der Methode <code class="methodname">farbe</code> können wir uns
        außerhalb der Instanz den Wert von <code class="varname">@farbe</code> ausgeben
        lassen.</div></div></div><div class="section" title="2.6.6. Symbol" id="ruby-symbol"><div class="titlepage"><div><div><h3 class="title">2.6.6. Symbol</h3></div></div></div><div class="para">Suchen Sie mit Google mal "Ruby Symbol" und Sie werden schnell
      erahnen, welche Qual das Schreiben dieses kleinen Abschnittes war.
      Zusätzlich kann man sich als Autor auch schlecht mit einem "ist nicht so
      wichtig" rausreden. Aber ich werde genau dieses tun.</div><div class="para">Zur Benutzung von Symbolen brauchen Sie erst mal nur zu wissen wie
      ein Symbol aussieht, und das ist leicht gezeigt:<pre class="programlisting">:symbolname</pre></div><div class="para">Es fängt also mit einem Doppelpunkt an, gefolgt von einem kleinen
      Buchstaben. Symbole werden Sie in Rails einige Male sehen und im Lauf
      der Zeit kommt Sinn rein. Fall Sie es dann nicht mehr aushalten, können
      Sie mit <span class="command"><strong>ri Symbol</strong></span> die Hilfeseite zur Klasse
      <code class="classname">Symbol</code> aufrufen.</div></div></div><ul class="docnav bottom"><li class="previous"><a accesskey="p" href="ruby-ist-objekt-orientiert.html"><strong>Zurück</strong>2.5. Ruby ist objektorientiert</a></li><li class="up"><a accesskey="u" href="#"><strong>Nach oben</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Zum Anfang</strong></a></li><li class="next"><a accesskey="n" href="noch_mal_methoden.html"><strong>Weiter</strong>2.7. Noch mal Methoden</a></li></ul></div><div class="clear"></div></div></div></body></html>
