<?xml version="1.0" encoding="UTF-8"?>
<section version="5.0" xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:svg="http://www.w3.org/2000/svg"
         xmlns:m="http://www.w3.org/1998/Math/MathML"
         xmlns:html="http://www.w3.org/1999/xhtml"
         xmlns:db="http://docbook.org/ns/docbook">
  <title>Installation auf Debian 5.0</title>

    <para>Die folgende Installationsanleitung setzt ein frisch installiertes
    Debian Linux 5.0 (Minimal-Version) voraus. Kein frisch installiertes
    Debian 5.0 zur Hand? Dann bitte in einer virtuellen Maschine (z.B. VMware)
    neu installieren.<note>
        <para>Es wird in dieser Anleitung nicht jeder Schritt und jeder Befehl
        lang und breit erklärt. Ich gehe davon aus, das Sie sich mit der Linux
        Kommandozeile so gut auskennen, das die jeweiligen Befehle
        selbsterklärend sind.</para>
      </note><warning>
        <para>Wer es nicht für nötig hält sich an dieses Kochrezept zu halten
        und lieber ein bereits installiertes Ruby oder ein anderes
        Betriebssystem nimmt: Später nicht rumjammern, wenn was nicht
        funktioniert! Und glauben Sie mir, es wird etwas nicht funktionieren!
        An sonsten würde ich nicht den Aufwand betreiben.</para>

        <para>Wenn Sie später Ruby on Rails verstanden hat, ist immer noch
        Zeit das alles auf dem eigenen Lieblingsbetriebssystem zum Laufen zu
        bringen.</para>
      </warning></para>

    <para>Als erstes logen wir uns als Root ein bringen wir alles auf den
    neuesten Stand der Dinge.<screen>debian:~# <command>aptitude update &amp;&amp; aptitude safe-upgrade</command>
Treffer http://volatile.debian.org lenny/volatile Release.gpg
Ign http://volatile.debian.org lenny/volatile/main Translation-de               
Treffer http://security.debian.org lenny/updates Release.gpg                    
Ign http://security.debian.org lenny/updates/main Translation-de
Treffer http://volatile.debian.org lenny/volatile Release  
Treffer http://security.debian.org lenny/updates Release   
Ign http://volatile.debian.org lenny/volatile/main Packages/DiffIndex           
Ign http://security.debian.org lenny/updates/main Packages/DiffIndex
Ign http://volatile.debian.org lenny/volatile/main Sources/DiffIndex
Ign http://security.debian.org lenny/updates/main Sources/DiffIndex
Treffer http://volatile.debian.org lenny/volatile/main Packages
Treffer http://security.debian.org lenny/updates/main Packages
Treffer http://volatile.debian.org lenny/volatile/main Sources
Treffer http://security.debian.org lenny/updates/main Sources
Treffer http://ftp.de.debian.org lenny Release.gpg         
Hole:1 http://ftp.de.debian.org lenny/main Translation-de [1820kB]
Treffer http://ftp.de.debian.org lenny Release                                  
Ign http://ftp.de.debian.org lenny/main Packages/DiffIndex                      
Ign http://ftp.de.debian.org lenny/main Sources/DiffIndex                       
Treffer http://ftp.de.debian.org lenny/main Packages                            
Treffer http://ftp.de.debian.org lenny/main Sources                             
1820kB wurden in 14s heruntergeladen (127kB/s)                                  
Paketlisten werden gelesen... Fertig

Paketlisten werden gelesen... Fertig
AbhÃ¤ngigkeitsbaum wird aufgebaut       
Lese Status-Informationen ein... Fertig
Lese erweiterte Statusinformationen      
Initialisiere Paketstatus... Fertig
Lese Task-Beschreibungen... Fertig 
Es werden keine Pakete installiert, aktualisiert oder entfernt.
0 Pakete aktualisiert, 0 zusÃ¤tzlich installiert, 0 werden entfernt und 0 nicht aktualisiert.
Muss 0B an Archiven herunterladen. Nach dem Entpacken werden 0B zusÃ¤tzlich belegt sein.
Paketlisten werden gelesen... Fertig
AbhÃ¤ngigkeitsbaum wird aufgebaut       
Lese Status-Informationen ein... Fertig
Lese erweiterte Statusinformationen      
Initialisiere Paketstatus... Fertig
Lese Task-Beschreibungen... Fertig 

debian:~#</screen></para>

    <para>Wir schlagen uns nicht mehr mit der alten 1.8er Ruby-Version rum,
    sondern installieren Ruby 1.9. Und das der Einfachheit halber direkt von
    der Quelle (bitte immer den aktuellen Downloadlink von
    <olink>http://www.ruby-lang.org/en/downloads/</olink> übernehmen). Zum
    Kompilieren benötigen wir eine Buildumgebung. Und wo wir schon mal dabei
    sind, installieren wir direkt noch die Datenbank
    <application>sqlite3</application><footnote>
        <para>Ja, man könnte hier auch eine MySQL oder sonst was Datenbank
        installieren. Brauchen wir aber alles nicht. Die sqlite3 ist für
        unsere Entwicklungsumgebung perfekt geeignet. In der Produktivumgebung
        kann man immer noch auf andere Datenbanken umsteigen.</para>
      </footnote> und den Kommando-Zeilen Web-Browser
    <application>w3m</application>, damit wir später schneller loslegen
    können.<screen>debian:~# <command>aptitude -y install build-essential libssl-dev zlib1g-dev libreadline5-dev libncurses5-dev sqlite3 libsqlite3-dev curl w3m</command>
Paketlisten werden gelesen... Fertig
AbhÃ¤ngigkeitsbaum wird aufgebaut       
Lese Status-Informationen ein... Fertig
Lese erweiterte Statusinformationen      
Initialisiere Paketstatus... Fertig
Lese Task-Beschreibungen... Fertig 
Die folgenden NEUEN Pakete werden zusÃ¤tzlich installiert:
  binutils{a} build-essential bzip2{a} cpp{a} cpp-4.3{a} dpkg-dev{a} g++{a} 
  g++-4.3{a} gcc{a} gcc-4.3{a} libc6-dev{a} libgmp3c2{a} libgomp1{a} 
  libmpfr1ldbl{a} libsqlite3-0{a} libsqlite3-dev libssl-dev 
  libstdc++6-4.3-dev{a} libtimedate-perl{a} linux-libc-dev{a} make{a} 
  patch{a} sqlite3 zlib1g-dev 
0 Pakete aktualisiert, 24 zusÃ¤tzlich installiert, 0 werden entfernt und 0 nicht aktualisiert.
Muss 22,2MB an Archiven herunterladen. Nach dem Entpacken werden 67,9MB zusÃ¤tzlich belegt sein.
Schreibe erweiterte Statusinformationen... Fertig
Hole:1 http://security.debian.org lenny/updates/main linux-libc-dev 2.6.26-19lenny2 [750kB]

[...]

Richte build-essential ein (11.4) ...
Paketlisten werden gelesen... Fertig             
AbhÃ¤ngigkeitsbaum wird aufgebaut       
Lese Status-Informationen ein... Fertig
Lese erweiterte Statusinformationen       
Initialisiere Paketstatus... Fertig
Schreibe erweiterte Statusinformationen... Fertig
Lese Task-Beschreibungen... Fertig               

debian:~#</screen></para>

    <para>Jetzt überprüfen wir noch welche Ruby-Version installiert
    ist.<screen>debian:~# <command>ruby -v</command>
-bash: ruby: command not found
debian:~#</screen></para>

    <para>A-Ha! Natürlich ist noch keine installiert. Falls bei Ihnen eine
    andere Meldung erscheinen sollte, dann müssen Sie noch mal auf Los zurück
    und ein frisches und diesmal minimales Debian Linux 5.0
    installieren.</para>

    <para>Alle anderen: Ein aktuelles (stable) Ruby 1.9 downloaden, entpacken
    und bauen. Je nach Rechenpower Ihres Systems, ist das wahrscheinlich auch
    eine gute Gelegenheit einen Kaffee zu kochen oder mit dem Hund spazieren
    zu gehen.<screen>debian:~# <command>cd /usr/src/</command>
debian:/usr/src# <command>wget ftp://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.1-p376.tar.gz</command>
--2009-12-23 19:34:15--  ftp://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.1-p376.tar.gz
           =&gt; `ruby-1.9.1-p376.tar.gz'
AuflÃ¶sen des Hostnamen Â»ftp.ruby-lang.orgÂ«.... 221.186.184.68
Verbindungsaufbau zu ftp.ruby-lang.org|221.186.184.68|:21... verbunden.
Anmelden als anonymous ... Angemeldet!
==&gt; SYST ... fertig.    ==&gt; PWD ... fertig.
==&gt; TYPE I ... fertig.  ==&gt; CWD /pub/ruby/1.9 ... fertig.
==&gt; SIZE ruby-1.9.1-p376.tar.gz ... 9073007
==&gt; PASV ... fertig.    ==&gt; RETR ruby-1.9.1-p376.tar.gz ... fertig.
LÃ¤nge: 9073007 (8,7M)

100%[======================================&gt;] 9.073.007    107K/s   in 57s     

2009-12-23 19:35:22 (155 KB/s) - Â»ruby-1.9.1-p376.tar.gzÂ« gespeichert [9073007]

debian:/usr/src# <command>tar xzf ruby-1.9.1-p376.tar.gz</command> 
debian:/usr/src# <command>cd ruby-1.9.1-p376</command>
debian:/usr/src/ruby-1.9.1-p376# <command>./configure &amp;&amp; make &amp;&amp; make install</command>
checking build system type... i686-pc-linux-gnu
checking host system type... i686-pc-linux-gnu
checking target system type... i686-pc-linux-gnu
checking for gcc... gcc

[...]

Files:   512
Classes: 1353
Modules: 567
Methods: 7486
Elapsed: 66.5s
./miniruby -I./lib -I.ext/common -I./- -r./ext/purelib.rb  ./instruby.rb --make="make" --dest-dir="" --extout=".ext" --mflags="" --make-flags="" --data-mode=0644 --prog-mode=0755 --installed-list .installed.list --install=rdoc --rdoc-output=".ext/rdoc"
installing rdoc
debian:/usr/src/ruby-1.9.1-p376#</screen></para>

    <para>Kurzer Check, ob Ruby 1.9 auch wirklich installiert wurde.<screen>debian:/usr/src/ruby-1.9.1-p376# <command>cd</command>
debian:~# <command>ruby -v</command>
ruby 1.9.1p376 (2009-12-07 revision 26041) [i686-linux]
debian:~# </screen></para>

    <para>Ja, das sieht sehr gut aus. Jetzt führen wir für den Paketmanager
    <application>gem</application> (der ist ab Ruby 1.9 automatisch mit dabei)
    noch ein Update durch).<screen>debian:~# <command>gem update --system</command>
Updating RubyGems
Updating rubygems-update

[...]

RubyGems installed the following executables:
/usr/local/bin/gem

debian:~# </screen></para>

    <para>Danach benutzen wir <application>gem</application> zum Installieren
    von Rails. Benötigte andere Pakete werden dabei von
    <application>gem</application> automatisch mit installiert.<screen>debian:~# <command>gem install rails</command>
Successfully installed rake-0.8.7
Successfully installed activesupport-2.3.5
Successfully installed activerecord-2.3.5
Successfully installed rack-1.0.1
Successfully installed actionpack-2.3.5
Successfully installed actionmailer-2.3.5
Successfully installed activeresource-2.3.5
Successfully installed rails-2.3.5
8 gems installed
Installing ri documentation for rake-0.8.7...
Installing ri documentation for activesupport-2.3.5...
Installing ri documentation for activerecord-2.3.5...
Installing ri documentation for rack-1.0.1...
Installing ri documentation for actionpack-2.3.5...
Installing ri documentation for actionmailer-2.3.5...
Installing ri documentation for activeresource-2.3.5...
Updating class cache with 1382 classes...
Installing RDoc documentation for rake-0.8.7...
Installing RDoc documentation for activesupport-2.3.5...
Installing RDoc documentation for activerecord-2.3.5...
Installing RDoc documentation for rack-1.0.1...
Installing RDoc documentation for actionpack-2.3.5...
Installing RDoc documentation for actionmailer-2.3.5...
Installing RDoc documentation for activeresource-2.3.5...
debian:~#</screen></para>

    <para>Und bevor wir es vergessen, installieren wir jetzt noch das Ruby-Gem
    um auf die <application>sqlite3</application> Datenbank zugreifen zu
    können.<screen>debian:~# <command>gem install sqlite3-ruby</command>
Building native extensions.  This could take a while...
Successfully installed sqlite3-ruby-1.2.5
1 gem installed
Installing ri documentation for sqlite3-ruby-1.2.5...
Updating class cache with 2543 classes...
Installing RDoc documentation for sqlite3-ruby-1.2.5...
debian:~#</screen></para>

    <para>Das ging doch Ratz-Fatz! Jetzt wechseln wir wieder zu einem normalen
    User.</para>
  </section>
