<?xml version="1.0" encoding="UTF-8"?>
<chapter version="5.0" xml:id="scaffolding"
         xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:svg="http://www.w3.org/2000/svg"
         xmlns:m="http://www.w3.org/1998/Math/MathML"
         xmlns:html="http://www.w3.org/1999/xhtml"
         xmlns:db="http://docbook.org/ns/docbook">
  <title xml:id="scaffolding.title">Scaffolding</title>

  <section>
    <title>Einleitung</title>

    <para>Die haben viel gelesen und mussten lange auf diesen Moment warten.
    Scaffolding ist Fluch und Segen gleichermassen. Scaffolding heißt nicht
    mehr, als das ein Grundgerüst für eine Applikation erstellt wird. Der
    meiner Meinung nach größte Teil an Frust mit Rails entsteht dadurch, das
    Anfänger ohne Ruby-Grundkenntnisse und ohne zu Wissen was ActiveRecord ist
    mit Scaffolding schnell zu einem Ergebnis kommen, aber dann nicht weiter
    wissen. Da Sie aber <xref linkend="ruby-grundlagen" />, <xref
    linkend="erste_schritte_mit_rails" /> und <xref
    linkend="activerecord_chapter" /> durchgearbeitet haben, werden Sie
    Scaffolding direkt verstehen und ausnutzen können.</para>
  </section>

  <section>
    <title>Einfaches Beispiel</title>

    <para>Legen wir doch mal mit Scaffolding eine Liste von Bundeskanzlern an.
    Dazu erst mal eine neue Rails-Applikation anlegen:<screen>stefan@swmbp 0 1.9.2-p0 ~$ <command>rails new politics</command>
[...]
stefan@swmbp 0 1.9.2-p0 ~$ <command>cd politics</command>
stefan@swmbp 0 1.9.2-p0 politics$ <command>bundle install</command>
[...]
stefan@swmbp 0 1.9.2-p0 politics$ </screen></para>

    <para>Am Anfang schauen wir uns mal die Optionen von Scaffolding
    an:<screen>stefan@swmbp 0 1.9.2-p0 politics$ <command>rails generate scaffold</command>
Usage:
  rails generate scaffold NAME [field:type field:type] [options]

Options:
  -o, --orm=NAME                  # Orm to be invoked
                                  # Default: active_record
      [--force-plural]            # Forces the use of a plural ModelName
  -c, --scaffold-controller=NAME  # Scaffold controller to be invoked
                                  # Default: scaffold_controller
  -y, [--stylesheets]             # Indicates when to generate stylesheets
                                  # Default: true

ActiveRecord options:
      [--migration]            # Indicates when to generate migration
                               # Default: true
      [--timestamps]           # Indicates when to generate timestamps
                               # Default: true
      [--parent=PARENT]        # The parent class for the generated model
  -t, [--test-framework=NAME]  # Test framework to be invoked
                               # Default: test_unit

TestUnit options:
      [--fixture]                   # Indicates when to generate fixture
                                    # Default: true
  -r, [--fixture-replacement=NAME]  # Fixture replacement to be invoked

ScaffoldController options:
  -e, [--template-engine=NAME]  # Template engine to be invoked
                                # Default: erb
      [--helper]                # Indicates when to generate helper
                                # Default: true

Runtime options:
  -f, [--force]    # Overwrite files that already exist
  -p, [--pretend]  # Run but do not make any changes
  -q, [--quiet]    # Supress status output
  -s, [--skip]     # Skip files that already exist

Description:
    Create rails files for scaffold generator.
stefan@swmbp 0 1.9.2-p0 politics$</screen></para>

    <para>Ich mache es kurz: Für unseren jetzigen Kenntnissstand können wir
    <code>scaffold</code> wie <code>model</code> benutzen (siehe <xref
    linkend="activerecord_datenbank_anlegen" />). Legen wir mal das Scaffold
    für Bundeskanzler an:<screen>stefan@swmbp 0 1.9.2-p0 politics$ <command>rails generate scaffold chancellor firstname:string lastname:string birthday:date day_of_death:date</command>
      invoke  active_record
      create    db/migrate/20101203160835_create_chancellors.rb
      create    app/models/chancellor.rb
      invoke    test_unit
      create      test/unit/chancellor_test.rb
      create      test/fixtures/chancellors.yml
       route  resources :chancellors
      invoke  scaffold_controller
      create    app/controllers/chancellors_controller.rb
      invoke    erb
      create      app/views/chancellors
      create      app/views/chancellors/index.html.erb
      create      app/views/chancellors/edit.html.erb
      create      app/views/chancellors/show.html.erb
      create      app/views/chancellors/new.html.erb
      create      app/views/chancellors/_form.html.erb
      invoke    test_unit
      create      test/functional/chancellors_controller_test.rb
      invoke    helper
      create      app/helpers/chancellors_helper.rb
      invoke      test_unit
      create        test/unit/helpers/chancellors_helper_test.rb
      invoke  stylesheets
      create    public/stylesheets/scaffold.css
stefan@swmbp 0 1.9.2-p0 politics$ </screen></para>

    <para></para>

    <para></para>

    <para></para>

    <para></para>

    <para></para>
  </section>
</chapter>
