<?xml version="1.0" encoding="UTF-8"?>
<section version="5.0" xml:id="rails3-install-osx" xml:lang="de"
         xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:svg="http://www.w3.org/2000/svg"
         xmlns:m="http://www.w3.org/1998/Math/MathML"
         xmlns:html="http://www.w3.org/1999/xhtml"
         xmlns:db="http://docbook.org/ns/docbook">
  <title xml:id="rails3-install-osx.title">Installation von Ruby on Rails 3.0
  mit RVM auf Mac OS X 10.7</title>

  <info>
    <collab>
      <person>
        <personname><firstname>Philipp</firstname><surname>Kempgen</surname></personname>
      </person>
    </collab>
  </info>

  <indexterm>
    <primary>Installation</primary>

    <secondary>von Ruby on Rails</secondary>

    <tertiary>auf Mac OS X 10.7</tertiary>
  </indexterm>

  <indexterm>
    <primary>Mac OS X 10.7</primary>

    <secondary>Installation von Ruby on Rails</secondary>
  </indexterm>

  <indexterm>
    <primary>Ruby</primary>

    <secondary>Installation</secondary>
  </indexterm>

  <indexterm>
    <primary>Rails</primary>

    <secondary>Installation</secondary>
  </indexterm>

  <indexterm>
    <primary>RVM (Ruby Version Manager)</primary>
  </indexterm>

  <indexterm>
    <primary>Ruby Version Manager</primary>

    <see>RVM</see>
  </indexterm>

  <para>Die Anzahl der Ruby-on-Rails-Entwickler, die auf Mac OS X entwickeln
  ist erfreulich hoch. Auf Rails-Konferenzen sieht man bei gefühlten 80 % der
  Teilnehmer ein MacBook.</para>

  <para>Mac OS 10.7 wird standardmäßig mit Ruby in der Version 1.8.7
  ausgeliefert. Für uns uninteressant. Wir wollen ein 1.9.2er Ruby und ein
  3.0er Rails. Um die bestehende Ruby- und Rails-Installation und damit das
  Paketmanagement von Mac OS X nicht zu beeinflussen, installieren wir Ruby
  1.9.2 und Rails 3.0 mit <indexterm>
      <primary>RVM</primary>
    </indexterm><indexterm>
      <primary>Ruby Version Manager</primary>
    </indexterm>RVM (Ruby Version Manager).</para>

  <para>Mit RVM können Sie als normaler Benutzer (also ohne Root-Rechte und in
  Ihrem Home-Verzeichnis) beliebig viele verschiedene Ruby-
  und-Rails-Versionen installieren und laufen lassen. So können Sie parallel
  an alten Projekten, die vielleicht noch Ruby 1.8.7 benutzen, und an neuen
  Projekten, die Ruby 1.9.2 benutzen, arbeiten.</para>

  <note>
    <para>Detaillierte Infos zu RVM finden Sie auf der RVM-Homepage unter <uri
    xlink:href="http://rvm.beginrescueend.com/">http://rvm.beginrescueend.com/</uri>.</para>
  </note>

  <section xml:id="xcode-install">
    <title xml:id="xcode-install.title">Xcode-Installation bzw.
    -Upgrade</title>

    <indexterm>
      <primary>Xcode</primary>
    </indexterm>

    <para>Bevor Sie mit der Installation von Ruby on Rails anfangen, müssen
    Sie auf Ihrem System die <emphasis>neuesten</emphasis> Xcode-Tools von
    Apple installieren. Am einfachsten geht das über den Mac App Store (nach
    "xcode" suchen).</para>

    <para>Alternativ können Sie auch das DVD-Image unter folgender URL
    herunterladen:</para>

    <para><uri
    xlink:href="http://developer.apple.com/technologies/xcode.html">http://developer.apple.com/technologies/xcode.html</uri></para>
  </section>

  <section xml:id="ruby-1.9.2-mit-rvm-macosx">
    <title xml:id="ruby-1.9.2-mit-rvm-macosx.title">Ruby 1.9.2 mit RVM
    installieren</title>

    <para>Öffnen Sie mit Ihren normalen User-Rechten ein Terminal und
    überprüfen Sie die installierte Ruby-Version:<screen>MacBook:~ xyz$ <command>ruby -v</command>
ruby 1.8.7 (2010-01-10 patchlevel 249) [universal-darwin11.0]</screen></para>

    <para>RVM lässt sich auf verschiedene Wege installieren. Ich empfehle das
    folgende Monsterkommando (bitte exakt kopieren), mit dem das aktuellste
    RVM installiert wird:<screen>MacBook:~ xyz$ <command>bash &lt; &lt;(curl -s https://rvm.beginrescueend.com/install/rvm)</command>
Cloning into rvm...
remote: Counting objects: 5439, done.
remote: Compressing objects: 100% (2567/2567), done.
remote: Total 5439 (delta 3539), reused 3901 (delta 2150)
Receiving objects: 100% (5439/5439), 1.85 MiB | 455 KiB/s, done.
Resolving deltas: 100% (3539/3539), done.

  RVM:  Shell scripts enabling management of multiple ruby environments.
  RTFM: https://rvm.beginrescueend.com/
  HELP: http://webchat.freenode.net/?channels=rvm (#rvm on irc.freenode.net)
  
Installing RVM to /Users/xyz/.rvm/
    Correct permissions for base binaries in /Users/xyz/.rvm/bin...
    Copying manpages into place.

  Notes for Darwin ( Mac OS X )
    For Snow Leopard be sure to have Xcode Tools Version 3.2.1 (1613) or later
    You should download the latest Xcode tools from developer.apple.com.
      (This is since the dvd install for Snow Leopard contained bugs).

    If you intend on installing MacRuby you must install LLVM first.
    If you intend on installing JRuby you must install the JDK.
    If you intend on installing IronRuby you must install Mono
      (version 2.6 or greater is recommended).

    To use an RVM installed Ruby as default instead of the system ruby:
    rvm install 1.8.7 # installs patch 352: closest supported version
    rvm system ; rvm gemset export system.gems ; rvm 1.8.7 ; rvm gemset import system # migrate your gems
    rvm --default 1.8.7

  
NOTE:
As of 1.8.0 RVM once again loads .rvmrc files, by default, after asking your
permission to trust it of course.  If you do not wish to be enabled, simply set:
    export rvm_project_rvmrc=0
Within either your /etc/rvmrc or $HOME/.rvmrc file. This will turn off the
cd/pushd hooks when sourcing the rvm() function into your shell.


 Example: echo 'export rvm_project_rvmrc=0' &gt;&gt; $HOME/.rvmrc;
 (Then close the current shel and open a new one.)


  You must now complete the install by loading RVM in new shells.

  If you wish to use RVM in an interactive fashion in your shells then
  Place the following line at the end of your shell's loading files
  (.bashrc or .bash_profile for bash and .zshrc for zsh),
  after all PATH/variable settings:

  [[ -s "/Users/xyz/.rvm/scripts/rvm" ]] &amp;&amp; source "/Users/xyz/.rvm/scripts/rvm"  # This loads RVM into a shell session.

  You only need to add this line the first time you install RVM.

  If you are choosing to source RVM into your environment to switch current
  shell environments, be sure to close this shell and open a new one so that
  the RVM functions load.


Installation of RVM to /Users/xyz/.rvm/ is complete.


xyz,

If you have any questions, issues and/or ideas for improvement please
fork the project and issue a pull request.

If you wish to disable the project .rvmrc file functionality, set
rvm_project_rvmrc=0 in either /etc/rvmrc or ~/.rvmrc.

Thank you for using RVM!

I sincerely hoped that RVM helped to make your life easier and more enjoyable!!!

  ~Wayne

</screen></para>

    <para>RVM ist jetzt fertig installiert, aber Sie müssen zum täglichen
    Gebrauch noch das Setzen einiger Grundparameter beim Starten einer neuen
    Shell in Ihre <filename>.bash_profile</filename> einfügen:</para>

    <para><screen>MacBook:~ xyz$ <command>echo '[[ -s "/Users/xyz/.rvm/scripts/rvm" ]] &amp;&amp; source "/Users/xyz/.rvm/scripts/rvm"' &gt;&gt; .bash_profile</command>
</screen></para>

    <important>
      <para>Jetzt müssen Sie das Terminal schließen und ein neues Terminal
      öffnen, denn sonst wirkt die gewünschte Veränderung noch nicht.</para>
    </important>

    <para>Um zu testen, ob <literal>rvm</literal> richtig installiert ist,
    rufen wir es einmal mit <literal>-v</literal> auf:<screen>MacBook:~ xyz$ <command>rvm -v</command>

rvm 1.8.0 by Wayne E. Seguin (wayneeseguin@gmail.com) [https://rvm.beginrescueend.com/]</screen></para>

    <para>Sollte hierbei als Antwort der Bash <quote><literal>command not
    found</literal></quote> ausgegeben werden, müssen Sie die obigen Schritte
    noch einmal überprüfen. Wahrscheinlich haben Sie einen Schritt
    ausgelassen.</para>

    <para>Der folgende Befehl zeigt Ihnen die <quote>Rubies</quote>
    (Ruby-Interpreter) an, die RVM kennt <footnote>
        <para>siehe <uri
        xlink:href="http://rvm.beginrescueend.com/rubies/list/"
        xml:lang="en">http://rvm.beginrescueend.com/rubies/list/</uri></para>
      </footnote>:<screen>MacBook:~ xyz$ <command>rvm list known</command>
# MRI Rubies
[ruby-]1.8.6[-p420]
[ruby-]1.8.6-head
[ruby-]1.8.7[-p352]
[ruby-]1.8.7-head
[ruby-]1.9.1-p378
[ruby-]1.9.1[-p431]
[ruby-]1.9.1-head
[ruby-]1.9.2-p180
[ruby-]1.9.2[-p290]
[ruby-]1.9.2-head
[ruby-]1.9.3[-preview1]
[ruby-]1.9.3-head
ruby-head
<replaceable>[...]</replaceable></screen></para>

    <note>
      <para><indexterm>
          <primary>Interpreter</primary>

          <secondary>Ruby</secondary>
        </indexterm><indexterm>
          <primary>Ruby</primary>

          <secondary>Interpreter</secondary>
        </indexterm>Es gibt für Ruby verschiedene Interpreter. Relevant ist
      hier für uns der ganz normale <indexterm>
          <primary>MRI (Matz's Ruby Interpreter)</primary>
        </indexterm><indexterm>
          <primary>Matz's Ruby Interpreter</primary>

          <see>MRI</see>
        </indexterm><emphasis role="bold"><acronym>MRI</acronym></emphasis>
      (<foreignphrase xml:lang="en">Matz's Ruby Interpreter</foreignphrase>)
      <footnote>
          <para>siehe <uri
          xlink:href="http://de.wikipedia.org/wiki/Ruby_%28Programmiersprache%29#Implementierungen">http://de.wikipedia.org/wiki/Ruby_(Programmiersprache)#Implementierungen</uri>,
          <uri xlink:href="http://en.wikipedia.org/wiki/Ruby_MRI"
          xml:lang="en">http://en.wikipedia.org/wiki/Ruby_MRI</uri></para>
        </footnote>, dessen Kern seit Ruby 1.9 die Ruby-VM namens <indexterm>
          <primary>YARV (Yet Another Ruby VM)</primary>
        </indexterm><emphasis role="bold"><acronym>YARV</acronym></emphasis>
      (<foreignphrase xml:lang="en">Yet Another Ruby VM</foreignphrase>)
      <footnote>
          <para>siehe <uri xlink:href="http://en.wikipedia.org/wiki/YARV"
          xml:lang="en">http://en.wikipedia.org/wiki/YARV</uri></para>
        </footnote> bildet.</para>
    </note>

    <para>Jetzt können Sie im neuen Terminal mit RVM Ruby 1.9.2
    installieren:<screen>MacBook:~ xyz$ <command>rvm install ruby-1.9.2</command>

Installing Ruby from source to: /Users/xyz/.rvm/rubies/ruby-1.9.2-p290, this may take a while depending on your cpu(s)...

ruby-1.9.2-p290 - #fetching 
ruby-1.9.2-p290 - #downloading ruby-1.9.2-p290, this may take a while depending on your connection...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 8604k  100 8604k    0     0   415k      0  0:00:20  0:00:20 --:--:--  468k
ruby-1.9.2-p290 - #extracting ruby-1.9.2-p290 to /Users/xyz/.rvm/src/ruby-1.9.2-p290
ruby-1.9.2-p290 - #extracted to /Users/xyz/.rvm/src/ruby-1.9.2-p290
Fetching yaml-0.1.4.tar.gz to /Users/xyz/.rvm/archives
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  460k  100  460k    0     0   137k      0  0:00:03  0:00:03 --:--:--  146k
Extracting yaml-0.1.4.tar.gz to /Users/xyz/.rvm/src
Configuring yaml in /Users/xyz/.rvm/src/yaml-0.1.4.
Compiling yaml in /Users/xyz/.rvm/src/yaml-0.1.4.
Installing yaml to /Users/xyz/.rvm/usr
ruby-1.9.2-p290 - #configuring 
ruby-1.9.2-p290 - #compiling 
ruby-1.9.2-p290 - #installing 
Retrieving rubygems-1.8.6
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  244k  100  244k    0     0   366k      0 --:--:-- --:--:-- --:--:--  420k
Extracting rubygems-1.8.6 ...
Removing old Rubygems files...
Installing rubygems-1.8.6 for ruby-1.9.2-p290 ...
Installation of rubygems completed successfully.
ruby-1.9.2-p290 - adjusting #shebangs for (gem irb erb ri rdoc testrb rake).
ruby-1.9.2-p290 - #importing default gemsets (/Users/xyz/.rvm/gemsets/)
Install of ruby-1.9.2-p290 - #complete 
MacBook:~ xyz$</screen></para>

    <para>Noch werden Sie per Default das auf OS X mitgelieferte 1.8er Ruby
    aufrufen. Das lässt sich leicht mit <command>ruby -v</command>
    herausfinden.<screen>MacBook:~ xyz$ <command>ruby -v</command>
ruby 1.8.7 (2010-01-10 patchlevel 249) [universal-darwin11.0]</screen></para>

    <para>Mit dem Befehl <command>rvm 1.9.2</command> können Sie aber auf ein
    1.9.2er Ruby wechseln.<screen>MacBook:~ xyz$ <command>rvm 1.9.2</command>
MacBook:~ xyz$ <command>ruby -v</command>
ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-darwin11.1.0]</screen></para>

    <para>Um das nicht bei jedem Einloggen neu eingeben zu müssen, können Sie
    Ruby 1.9.2 auch als Default einstellen:</para>

    <para><screen>MacBook:~ xyz$ <command>rvm --default 1.9.2</command></screen></para>

    <para>Jetzt haben wir auf unserem Mac OS X 10.7 mit
    <application>rvm</application> ein aktuelles Ruby 1.9.2 installiert und
    können mit dem Programm <literal>rvm</literal> zwischen den beiden
    Versionen hin- und herschalten. Für den Rest des Buches gehe ich immer von
    der Version 1.9.2 aus.</para>

    <note>
      <para>Mit dem Befehl <command>rvm system</command> können Sie auch
      jederzeit wieder auf die System-Ruby-Version 1.8.x
      zurückschalten.</para>
    </note>

    <tip>
      <para>Geben Sie einfach mal den Befehl <command>rvm</command> ein, um
      eine entsprechende Hilfe-Seite mit weiteren Befehlen angezeigt zu
      bekommen.</para>
    </tip>
  </section>

  <section xml:id="macosx-rails30-oder-31-installieren">
    <title xml:id="macosx-rails30-oder-31-installieren.title">Rails
    installieren</title>

    <para>Zuerst überprüfen wir, ob ein Ruby in der Version 1.9.2 aufgerufen
    wird. Sollte das nicht der Fall sein, lesen Sie sich bitte <xref
    linkend="ruby-1.9.2-mit-rvm-macosx" /> durch.<screen>MacBook:~ xyz$ <command>ruby -v</command>
ruby 1.9.2p290 (2011-07-09 revision 32553) [i686-linux]</screen></para>

    <para>Anschließend stellen wir sicher, dass das
    <literal>gem</literal>-Paketmanagement aktuell ist:<screen>MacBook:~ xyz$ <command>rvm rubygems current</command>
Removing old Rubygems files...
Installing rubygems-1.8.6 for ruby-1.9.2-p290 ...
Installation of rubygems completed successfully.
xyz@debian:~$ <command>gem update</command>
Updating installed gems
Nothing to update
MacBook:~ xyz$</screen></para>

    <section xml:id="macosx-rails30-installieren">
      <title xml:id="macosx-rails30-installieren.title">Rails 3.0
      installieren</title>

      <para>Der Rest ist einfach:<screen>MacBook:~ xyz$ <command>gem install rails --version '~&gt; 3.0.0'</command>
Fetching: activesupport-3.0.10.gem (100%)
Fetching: builder-2.1.2.gem (100%)

[...]

Installing RDoc documentation for railties-3.0.10...
Installing RDoc documentation for bundler-1.0.18...
Installing RDoc documentation for rails-3.0.10...
MacBook:~ xyz$</screen></para>

      <para>Perfekt. Jetzt haben Sie Rails 3.0 installiert. <screen>MacBook:~ xyz$ <command>rails -v</command>
Rails 3.0.10
MacBook:~ xyz$</screen></para>
    </section>

    <section xml:id="macosx-rails31-installieren">
      <title xml:id="macosx-rails31-installieren.title">Rails 3.1
      installieren</title>

      <para>Der Rest ist einfach:<screen>MacBook:~ xyz$ <command>gem install rails --version '~&gt; 3.1.0'</command>

[...]

Installing RDoc documentation for rails-3.1.0...
MacBook:~ xyz$</screen></para>

      <para>Perfekt. Jetzt haben Sie Rails 3.1 installiert. <screen>xyz@debian:~$ <command>rails -v</command>
Rails 3.1.0
xyz@debian:~$</screen></para>
    </section>
  </section>

  <section>
    <title xml:id="macosx-install-danach">Und jetzt?</title>

    <para>Wenn Sie noch nie mit Ruby gearbeitet haben, sollten Sie zuerst die
    <xref linkend="ruby-grundlagen" /> lesen. Wenn Sie schon Ruby-Meister sind
    und sich neu mit Rails beschäftigen wollen, dann empfehle ich Ihnen die
    Lektüre von <xref linkend="erste_schritte_mit_rails" />.</para>
  </section>
</section>
