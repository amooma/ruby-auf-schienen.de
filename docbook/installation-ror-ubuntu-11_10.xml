<?xml version="1.0" encoding="UTF-8"?>
<section version="5.0" xml:id="rails3-install-ubuntu" xml:lang="de"
         xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:svg="http://www.w3.org/2000/svg"
         xmlns:m="http://www.w3.org/1998/Math/MathML"
         xmlns:html="http://www.w3.org/1999/xhtml"
         xmlns:db="http://docbook.org/ns/docbook">
  <title xml:id="rails3-install-ubuntu.title">Installation von Ruby on Rails
  3.0 oder 3.1 mit RVM auf Ubuntu 11.10</title>

  <indexterm>
    <primary>Installation</primary>

    <secondary>von Ruby on Rails</secondary>

    <tertiary>auf Ubuntu 11.10</tertiary>
  </indexterm>

  <indexterm>
    <primary>Ubuntu 11.10</primary>

    <secondary>Installation von Ruby on Rails</secondary>
  </indexterm>

  <indexterm>
    <primary>Ruby</primary>

    <secondary>Installation</secondary>
  </indexterm>

  <indexterm>
    <primary>Rails</primary>

    <secondary>Installation</secondary>
  </indexterm>

  <indexterm>
    <primary>RVM (Ruby Version Manager)</primary>
  </indexterm>

  <indexterm>
    <primary>Ruby Version Manager</primary>

    <see>RVM</see>
  </indexterm>

  <para>Es gibt zwei Hauptgründe ein Ruby-on-Rails-System mit RVM (Ruby
  Version Manager) zu installieren:<itemizedlist>
      <listitem>
        <para>Man hat schlicht und ergreifend keine Root-Rechte auf dem
        System. Dann geht es nicht anders.</para>
      </listitem>

      <listitem>
        <para>Man möchte mehrere und sauber voneinander abgetrennte
        Rails-Systeme und damit vielleicht Rails-Versionen betreiben. Das
        lässt sich mit RVM und verschiedenen Accounts auf dem Linux-System
        sehr gut realisieren. So können Sie auf einem Rechner ein Ruby 1.8.7
        mit einem Rails 2.3.8 und parallel ein Ruby 1.9.2 mit einem Rails 3.0
        betreiben.</para>
      </listitem>

      <listitem>
        <para>RVM ist einfach super praktisch!</para>
      </listitem>
    </itemizedlist></para>

  <note>
    <para>Detaillierte Infos zu RVM finden Sie auf der RVM-Homepage unter <uri
    xlink:href="http://rvm.beginrescueend.com/">http://rvm.beginrescueend.com/</uri>.</para>
  </note>

  <para>Diese Beschreibung setzt ein frisch installiertes Ubuntu 11.10 voraus.
  Ein ISO-Image für die Installation finden Sie auf <uri
  xlink:href="http://www.ubuntu.com/download/ubuntu/download">http://www.ubuntu.com/download/ubuntu/download</uri>.</para>

  <section xml:id="rails3-ubuntu1110-install-vorbereitung">
    <title
    xml:id="rails3-ubuntu1110-install-vorbereitung.title">Vorbereitungen</title>

    <para>Wenn Sie auf dem Zielsystem Root- bzw. sudo-Rechte besitzen, dann
    können Sie mit folgendem Befehl sichergehen, dass alle notwendigen
    Programme für eine erfolgreiche Installation von RVM bereitstehen. Falls
    Sie keine Root-Rechte haben, müssen Sie entweder hoffen, dass Ihr Admin
    bereits alles so installiert hat oder ihm die entsprechende Zeile kurz
    mailen.</para>

    <para>Als Erstes ein Update der Paketlisten:<screen>stefan@ubuntu:~$ <command>sudo apt-get update</command>
[sudo] password for stefan: 
Ign http://security.ubuntu.com oneiric-security InRelease
Ign http://extras.ubuntu.com oneiric InRelease                                 
OK   http://security.ubuntu.com oneiric-security Release.gpg

[...]
</screen></para>

    <note>
      <para>Natürlich können Sie optional auf dem System einen SSH-Server
      installieren, um dann auf dem System per SSH statt auf der Konsole zu
      arbeiten:<screen>stefan@ubuntu:~$ <command>sudo apt-get install ssh</command></screen></para>
    </note>

    <para>Und jetzt die Installation der zur Installation von RVM und später
    Ruby on Rails benötigten Pakete:<screen>stefan@ubuntu:~$ <command>sudo apt-get -y install curl git-core patch</command> \
<command>  build-essential bison zlib1g-dev libssl-dev libxml2-dev \
  libxml2-dev sqlite3 libsqlite3-dev autotools-dev \
  libxslt1-dev libyaml-0-2 autoconf automake libreadline6-dev \
  libyaml-dev libtool</command>
Paketlisten werden gelesen... Fertig
Abhängigkeitsbaum wird aufgebaut       
Status-Informationen einlesen... Fertig
Die folgenden zusätzlichen Pakete werden installiert:

[...]</screen></para>
  </section>

  <section xml:id="ruby-1.9.2-mit-rvm-debian5">
    <title xml:id="ruby-1.9.2-mit-rvm-debian5.title">Ruby 1.9.2 mit RVM
    installieren</title>

    <para>RVM lässt sich auf verschiedene Wege installieren. Ich empfehle das
    folgende Monsterkommando (bitte exakt kopieren), mit dem das aktuellste
    RVM installiert wird:<screen>xyz@debian:~$ <command>bash &lt; &lt;(curl -s https://rvm.beginrescueend.com/install/rvm)</command>
Cloning into rvm...
remote: Counting objects: 5439, done.
remote: Compressing objects: 100% (2567/2567), done.
remote: Total 5439 (delta 3539), reused 3901 (delta 2150)
Receiving objects: 100% (5439/5439), 1.85 MiB | 447 KiB/s, done.
Resolving deltas: 100% (3539/3539), done.

  RVM:  Shell scripts enabling management of multiple ruby environments.
  RTFM: https://rvm.beginrescueend.com/
  HELP: http://webchat.freenode.net/?channels=rvm (#rvm on irc.freenode.net)
  
Installing RVM to /home/xyz/.rvm/
    Correct permissions for base binaries in /home/xyz/.rvm/bin...
    Copying manpages into place.
cat: /etc/*-release: Datei oder Verzeichnis nicht gefunden


Notes for Linux (  )

NOTE: 'ruby' represents Matz's Ruby Interpreter (MRI) (1.8.X, 1.9.X)
             This is the *original* / standard Ruby Language Interpreter
      'ree'  represents Ruby Enterprise Edition
      'rbx'  represents Rubinius

bash &gt;= 3.2 is required
curl is required
git is required (&gt;= 1.7 recommended)
patch is required (for ree and some ruby-head's).

If you wish to install rbx and/or Ruby 1.9 head (MRI) (eg. 1.9.2-head),
then you must install and use rvm 1.8.7 first.

If you wish to have the 'pretty colors' again,
  set 'export rvm_pretty_print_flag=1' in ~/.rvmrc.

dependencies:
# For RVM
  rvm: bash curl git

# For Ruby (MRI, Rubinius, &amp; REE)  you should install the following OS dependencies:
  ruby: /usr/bin/apt-get install build-essential bison openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-0 libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake

# For JRuby (if you wish to use it) you will need:
  jruby: /usr/bin/apt-get install curl g++ openjdk-6-jre-headless
  jruby-head: /usr/bin/apt-get install ant openjdk-6-jdk

# In addition to ruby: dependencies,
  ruby-head: subversion

# For IronRuby (if you wish to use it) you will need:
  ironruby: /usr/bin/apt-get install curl mono-2.0-devel

For rbx (Rubinius) more than 600MB of free RAM is required.

NOTE:
As of 1.8.0 RVM once again loads .rvmrc files, by default, after asking your
permission to trust it of course.  If you do not wish to be enabled, simply set:
    export rvm_project_rvmrc=0
Within either your /etc/rvmrc or $HOME/.rvmrc file. This will turn off the
cd/pushd hooks when sourcing the rvm() function into your shell.


 Example: echo 'export rvm_project_rvmrc=0' &gt;&gt; $HOME/.rvmrc;
 (Then close the current shel and open a new one.)


  You must now complete the install by loading RVM in new shells.

  If you wish to use RVM in an interactive fashion in your shells then
  Place the following line at the end of your shell's loading files
  (.bashrc or .bash_profile for bash and .zshrc for zsh),
  after all PATH/variable settings:

  [[ -s "/home/xyz/.rvm/scripts/rvm" ]] &amp;&amp; source "/home/xyz/.rvm/scripts/rvm"  # This loads RVM into a shell session.

  You only need to add this line the first time you install RVM.

  If you are choosing to source RVM into your environment to switch current
  shell environments, be sure to close this shell and open a new one so that
  the RVM functions load.


Installation of RVM to /home/xyz/.rvm/ is complete.


xyz,

If you have any questions, issues and/or ideas for improvement please
fork the project and issue a pull request.

If you wish to disable the project .rvmrc file functionality, set
rvm_project_rvmrc=0 in either /etc/rvmrc or ~/.rvmrc.

Thank you for using RVM!

I sincerely hoped that RVM helped to make your life easier and more enjoyable!!!

  ~Wayne


xyz@debian:~$</screen></para>

    <para>RVM ist jetzt fertig installiert.</para>

    <important>
      <para>Jetzt müssen Sie das Terminal schließen und ein neues Terminal
      öffnen, denn ansonsten wird die vom Install-Skript angepasste
      <filename>.bashrc</filename> nicht neu geladen.</para>
    </important>

    <para>Um zu testen, ob <literal>rvm</literal> richtig installiert ist,
    rufen wir es einmal mit <literal>-v</literal> auf:<screen>xyz@debian:~$ <command>rvm -v</command>

rvm 1.8.0 by Wayne E. Seguin (wayneeseguin@gmail.com) [https://rvm.beginrescueend.com/]
</screen></para>

    <para>Sollte hierbei als Antwort der Bash <quote><literal>command not
    found</literal></quote> ausgegeben werden, müssen Sie die obigen Schritte
    noch einmal überprüfen.</para>

    <para>Der folgende Befehl zeigt Ihnen die <quote>Rubies</quote>
    (Ruby-Interpreter) an, die RVM kennt <footnote>
        <para>siehe <uri
        xlink:href="http://rvm.beginrescueend.com/rubies/list/"
        xml:lang="en">http://rvm.beginrescueend.com/rubies/list/</uri></para>
      </footnote>:<screen>xyz@debian:~$ <command>rvm list known</command>
# MRI Rubies
[ruby-]1.8.6[-p420]
[ruby-]1.8.6-head
[ruby-]1.8.7[-p352]
[ruby-]1.8.7-head
[ruby-]1.9.1-p378
[ruby-]1.9.1[-p431]
[ruby-]1.9.1-head
[ruby-]1.9.2-p180
[ruby-]1.9.2[-p290]
[ruby-]1.9.2-head
[ruby-]1.9.3[-preview1]
[ruby-]1.9.3-head
ruby-head

<replaceable>[...]</replaceable></screen></para>

    <note>
      <para><indexterm>
          <primary>Interpreter</primary>

          <secondary>Ruby</secondary>
        </indexterm><indexterm>
          <primary>Ruby</primary>

          <secondary>Interpreter</secondary>
        </indexterm>Es gibt für Ruby verschiedene Interpreter. Relevant ist
      hier für uns der ganz normale <indexterm>
          <primary>MRI (Matz's Ruby Interpreter)</primary>
        </indexterm><indexterm>
          <primary>Matz's Ruby Interpreter</primary>

          <see>MRI</see>
        </indexterm><emphasis role="bold"><acronym>MRI</acronym></emphasis>
      (<foreignphrase xml:lang="en">Matz's Ruby Interpreter</foreignphrase>)
      <footnote>
          <para>siehe <uri
          xlink:href="http://de.wikipedia.org/wiki/Ruby_%28Programmiersprache%29#Implementierungen">http://de.wikipedia.org/wiki/Ruby_(Programmiersprache)#Implementierungen</uri>,
          <uri xlink:href="http://en.wikipedia.org/wiki/Ruby_MRI"
          xml:lang="en">http://en.wikipedia.org/wiki/Ruby_MRI</uri></para>
        </footnote>, dessen Kern seit Ruby 1.9 die Ruby-VM namens <indexterm>
          <primary>YARV (Yet Another Ruby VM)</primary>
        </indexterm><emphasis role="bold"><acronym>YARV</acronym></emphasis>
      (<foreignphrase xml:lang="en">Yet Another Ruby VM</foreignphrase>)
      <footnote>
          <para>siehe <uri xlink:href="http://en.wikipedia.org/wiki/YARV"
          xml:lang="en">http://en.wikipedia.org/wiki/YARV</uri></para>
        </footnote> bildet.</para>
    </note>

    <para>Jetzt können Sie mit RVM Ruby 1.9.2 installieren:<screen>xyz@debian:~$ <command>rvm install ruby-1.9.2</command>

Installing Ruby from source to: /home/xyz/.rvm/rubies/ruby-1.9.2-p290, this may take a while depending on your cpu(s)...

ruby-1.9.2-p290 - #fetching 
ruby-1.9.2-p290 - #downloading ruby-1.9.2-p290, this may take a while depending on your connection...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 8604k  100 8604k    0     0   405k      0  0:00:21  0:00:21 --:--:--  467k
ruby-1.9.2-p290 - #extracting ruby-1.9.2-p290 to /home/xyz/.rvm/src/ruby-1.9.2-p290
ruby-1.9.2-p290 - #extracted to /home/xyz/.rvm/src/ruby-1.9.2-p290
Fetching yaml-0.1.4.tar.gz to /home/xyz/.rvm/archives
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  460k  100  460k    0     0   143k      0  0:00:03  0:00:03 --:--:--  164k
Extracting yaml-0.1.4.tar.gz to /home/xyz/.rvm/src
Configuring yaml in /home/xyz/.rvm/src/yaml-0.1.4.
Compiling yaml in /home/xyz/.rvm/src/yaml-0.1.4.
Installing yaml to /home/xyz/.rvm/usr
ruby-1.9.2-p290 - #configuring 
ruby-1.9.2-p290 - #compiling 
ruby-1.9.2-p290 - #installing 
Retrieving rubygems-1.8.6
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  244k  100  244k    0     0   318k      0 --:--:-- --:--:-- --:--:--  415k
Extracting rubygems-1.8.6 ...
Removing old Rubygems files...
Installing rubygems-1.8.6 for ruby-1.9.2-p290 ...
Installation of rubygems completed successfully.
ruby-1.9.2-p290 - adjusting #shebangs for (gem irb erb ri rdoc testrb rake).
ruby-1.9.2-p290 - #importing default gemsets (/home/xyz/.rvm/gemsets/)
Install of ruby-1.9.2-p290 - #complete  

xyz@debian:~$ </screen></para>

    <para>Noch haben Sie per Default auf Ihrer Debian Minimalinstallation kein
    <command>ruby</command> . Deshalb bekommt ein <command>ruby -v</command>
    eine Fehlermeldung:<screen>xyz@debian:~$ <command>ruby -v</command>
bash: ruby: command not found
xyz@debian:~$ </screen></para>

    <para>Mit dem Befehl <command>rvm ruby-1.9.2</command> oder kurz
    <command>rvm 1.9.2</command> können Sie aber ein Ruby 1.9.2 aktivieren
    <footnote>
        <para>Dieses wird dann in den sogenannten <varname>PATH</varname>
        (also den Such-Pfad für ausführbare Programme) des aktuellen Benutzers
        eingetragen.</para>

        <para>Weitere Informationen zum <varname>PATH</varname>: <uri
        xlink:href="http://en.wikipedia.org/wiki/PATH_%28variable%29"
        xml:lang="en">http://en.wikipedia.org/wiki/PATH_(variable)</uri></para>
      </footnote>.<screen>xyz@debian:~$ <command>rvm 1.9.2</command>
xyz@debian:~$ <command>ruby -v</command>
ruby 1.9.2p290 (2011-07-09 revision 32553) [i686-linux]
xyz@debian:~$ </screen></para>

    <para>Dummerweise müssten Sie jetzt in jeder neuen Shell <command>rvm
    1.9.2</command> eingeben. Sie können für diesen User aber auch die
    Ruby-Version 1.9.2 als Default einstellen:<screen>xyz@debian:~$ <command>rvm --default 1.9.2</command></screen></para>

    <note>
      <para>Sollten Sie vorher bereits eine System-Ruby-Version 1.8.x
      installiert haben, so können Sie mit dem Befehl <command>rvm
      system</command> jederzeit wieder auf diese zurückwechseln.</para>
    </note>

    <tip>
      <para>Geben Sie einfach mal den Befehl <command>rvm</command> ein, um
      eine entsprechende Hilfe-Seite mit weiteren Befehlen angezeigt zu
      bekommen.</para>
    </tip>
  </section>

  <section xml:id="ubuntu-rails30-oder-31-installieren">
    <title xml:id="ubuntu-rails30-oder-31-installieren.title">Rails
    installieren</title>

    <para>Zuerst überprüfen wir, ob ein Ruby in der Version 1.9.2 aufgerufen
    wird. Sollte das nicht der Fall sein, lesen Sie sich bitte <xref
    linkend="ruby-1.9.2-mit-rvm-debian5" /> durch.<screen>xyz@debian:~$ <command>ruby -v</command>
ruby 1.9.2p290 (2011-07-09 revision 32553) [i686-linux]</screen></para>

    <para>Anschließend stellen wir sicher, dass das
    <literal>gem</literal>-Paketmanagement aktuell ist:<screen>xyz@debian:~$ <command>rvm rubygems current</command>
Removing old Rubygems files...
Installing rubygems-1.8.6 for ruby-1.9.2-p290 ...
Installation of rubygems completed successfully.
xyz@debian:~$ <command>gem update</command>
Updating installed gems
Nothing to update
xyz@debian:~$</screen></para>

    <section xml:id="ubuntu-rails30-installieren">
      <title xml:id="ubuntu-rails30-installieren.title">Rails 3.0
      installieren</title>

      <para>Der Rest ist einfach:<screen>xyz@debian:~$ <command>gem install rails --version '~&gt; 3.0.0'</command>
Fetching: activesupport-3.0.10.gem (100%)
Fetching: builder-2.1.2.gem (100%)

[...]

Installing RDoc documentation for railties-3.0.10...
Installing RDoc documentation for bundler-1.0.18...
Installing RDoc documentation for rails-3.0.10...
xyz@debian:~$</screen></para>

      <para>Perfekt. Jetzt haben Sie Rails 3.0 installiert. <screen>xyz@debian:~$ <command>rails -v</command>
Rails 3.0.10
xyz@debian:~$</screen></para>
    </section>

    <section xml:id="ubuntu-rails31-installieren">
      <title xml:id="ubuntu-rails31-installieren.title">Rails 3.1
      installieren</title>

      <para>Der Rest ist einfach:<screen>xyz@debian:~$ <command>gem install rails --version '~&gt; 3.1.0'</command>

[...]

Installing RDoc documentation for rails-3.1.0...
xyz@debian:~$</screen></para>

      <para>Perfekt. Jetzt haben Sie Rails 3.1 installiert. <screen>xyz@debian:~$ <command>rails -v</command>
Rails 3.1.0
xyz@debian:~$</screen></para>
    </section>
  </section>

  <section xml:id="debian-install-danach">
    <title xml:id="debian-install-danach.title">Und jetzt?</title>

    <para>Wenn Sie noch nie mit Ruby gearbeitet haben, sollten Sie zuerst die
    <xref linkend="ruby-grundlagen" /> lesen. Wenn Sie schon Ruby-Meister sind
    und sich neu mit Rails beschäftigen wollen, dann empfehle ich Ihnen die
    Lektüre von <xref linkend="erste_schritte_mit_rails" />.</para>
  </section>
</section>
